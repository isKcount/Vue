<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html"><meta property="og:site_name" content="æ–‡æ¡£æ¼”ç¤º"><meta property="og:title" content="Kubernetes kubectlå‘½ä»¤"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-10-11T05:08:11.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="2022-01-22T12:12:12.000Z"><meta property="article:modified_time" content="2022-10-11T05:08:11.000Z"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>Kubernetes kubectlå‘½ä»¤ | æ–‡æ¡£æ¼”ç¤º</title><meta name="description" content="vuepress-theme-hope çš„æ–‡æ¡£æ¼”ç¤º">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.7cb9ac72.css">
    <link rel="modulepreload" href="/assets/app.85823306.js"><link rel="modulepreload" href="/assets/23.kubectlå‘½ä»¤.html.c8f5b20f.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/23.kubectlå‘½ä»¤.html.93f84934.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/zh" class="brand"><img class="logo" src="/logo.svg" alt="æ–‡æ¡£æ¼”ç¤º"><!----><span class="site-name hide-in-pad">æ–‡æ¡£æ¼”ç¤º</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/zh" class="nav-link" aria-label="isKcount"><span class="icon iconfont icon-home"></span>isKcount<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åˆ†ç±»"><span class="title"><span class="icon iconfont icon-interact"></span>åˆ†ç±»</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zh/isKcount/1/" class="nav-link" aria-label="å­¦ä¹ è·¯çº¿è§„åˆ’"><span class="icon iconfont icon-ability"></span>å­¦ä¹ è·¯çº¿è§„åˆ’<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/2/" class="nav-link active" aria-label="è€ƒè¯"><span class="icon iconfont icon-relation"></span>è€ƒè¯<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/3/" class="nav-link" aria-label="è¿ç»´ç¬”è®°"><span class="icon iconfont icon-linux"></span>è¿ç»´ç¬”è®°<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/4/" class="nav-link" aria-label="åç«¯å¼€å‘ç¬”è®°"><span class="icon iconfont icon-note"></span>åç«¯å¼€å‘ç¬”è®°<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/5/" class="nav-link" aria-label="å‰ç«¯å¼€å‘ç¬”è®°"><span class="icon iconfont icon-like"></span>å‰ç«¯å¼€å‘ç¬”è®°<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/6/" class="nav-link" aria-label="ä¸­é—´ä»¶æœåŠ¡ç¬”è®°"><span class="icon iconfont icon-api"></span>ä¸­é—´ä»¶æœåŠ¡ç¬”è®°<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Devops"><span class="title"><span class="icon iconfont icon-select"></span>Devops</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zh/cicd/git/" class="nav-link" aria-label="Gitå¼€å‘æ‰‹å†Œ"><span class="icon iconfont icon-git"></span>Gitå¼€å‘æ‰‹å†Œ<!----></a></li><li class="dropdown-item"><a href="/zh/cicd/ci/" class="nav-link" aria-label="CICD"><span class="icon iconfont icon-ci"></span>CICD<!----></a></li><li class="dropdown-item"><a href="/zh/cicd/istio/" class="nav-link" aria-label="Istio"><span class="icon iconfont icon-material"></span>Istio<!----></a></li><li class="dropdown-item"><a href="/zh/cicd/operator/" class="nav-link" aria-label="Operator"><span class="icon iconfont icon-proxy"></span>Operator<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://wallhaven.cc/" rel="noopener noreferrer" target="_blank" aria-label="Wallhaven" class="nav-link"><span class="icon iconfont icon-autumn"></span>Wallhaven<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zh/isKcount/" class="nav-link sidebar-link sidebar-page" aria-label="æŒ‡å—"><span class="icon iconfont icon-creative"></span>æŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-ability"></span><span class="title">å­¦ä¹ è·¯çº¿è§„åˆ’</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-relation"></span><span class="title">è€ƒè¯</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-linux"></span><span class="title">è¿ç»´ç¬”è®°</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">åç«¯å¼€å‘ç¬”è®°</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-like"></span><span class="title">å‰ç«¯å¼€å‘ç¬”è®°</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-api"></span><span class="title">ä¸­é—´ä»¶æœåŠ¡ç¬”è®°</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Kubernetes kubectlå‘½ä»¤</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://iskcount.github.io" target="_blank" rel="noopener noreferrer">isKcount</a></span><span property="author" content="isKcount"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´1æœˆ22æ—¥</span><meta property="datePublished" content="2022-01-22T12:12:12.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 14 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT14M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectlå‘½ä»¤è¡Œç®¡ç†å·¥å…·" class="router-link-active router-link-exact-active toc-link level2">Kubectlå‘½ä»¤è¡Œç®¡ç†å·¥å…·</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#åŸºç¡€å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">åŸºç¡€å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#éƒ¨ç½²å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">éƒ¨ç½²å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#é›†ç¾¤ç®¡ç†å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">é›†ç¾¤ç®¡ç†å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#æ•…éšœè¯Šæ–­å’Œè°ƒè¯•å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">æ•…éšœè¯Šæ–­å’Œè°ƒè¯•å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#é«˜çº§å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">é«˜çº§å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#è®¾ç½®å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">è®¾ç½®å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#å…¶ä»–å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">å…¶ä»–å‘½ä»¤</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-run-å‘½ä»¤è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">kubectl run å‘½ä»¤è¯¦è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-exposeå‘½ä»¤è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">kubectl exposeå‘½ä»¤è¯¦è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-annotate-å‘½ä»¤è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">kubectl annotate å‘½ä»¤è¯¦è§£</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#æœ‰æ•ˆèµ„æºç±»å‹åŒ…æ‹¬" class="router-link-active router-link-exact-active toc-link level3">æœ‰æ•ˆèµ„æºç±»å‹åŒ…æ‹¬ï¼š</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-autoscale-å‘½ä»¤è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">kubectl autoscale å‘½ä»¤è¯¦è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-create-å‘½ä»¤è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">kubectl create å‘½ä»¤è¯¦è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-create-clusterrole" class="router-link-active router-link-exact-active toc-link level2">kubectl create clusterrole</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-create-clusterrolebinding" class="router-link-active router-link-exact-active toc-link level2">kubectl create clusterrolebinding</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-create-quota" class="router-link-active router-link-exact-active toc-link level2">kubectl create quota</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#èµ„æºé…é¢çš„å¯ç”¨" class="router-link-active router-link-exact-active toc-link level3">èµ„æºé…é¢çš„å¯ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#èµ„æºé…é¢çš„ç±»å‹" class="router-link-active router-link-exact-active toc-link level3">èµ„æºé…é¢çš„ç±»å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#limitrange" class="router-link-active router-link-exact-active toc-link level3">LimitRange</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-create-role" class="router-link-active router-link-exact-active toc-link level2">kubectl create role</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-create-rolebinding" class="router-link-active router-link-exact-active toc-link level2">kubectl create rolebinding</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-create-service" class="router-link-active router-link-exact-active toc-link level2">kubectl create service</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#service-ç±»å‹" class="router-link-active router-link-exact-active toc-link level3">Service ç±»å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#åˆ›å»ºå…·æœ‰æŒ‡å®šserviceåçš„clusteripã€‚" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºå…·æœ‰æŒ‡å®šServiceåçš„clusterIPã€‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#åˆ›å»ºæŒ‡å®šserviceåçš„externalnameã€‚" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºæŒ‡å®šServiceåçš„ExternalNameã€‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#åˆ›å»ºä¸€ä¸ªæŒ‡å®šåç§°çš„serviceçš„loadbalancerã€‚" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºä¸€ä¸ªæŒ‡å®šåç§°çš„Serviceçš„LoadBalancerã€‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#åˆ›å»ºæŒ‡å®šserviceåç§°çš„nodeportã€‚" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºæŒ‡å®šServiceåç§°çš„nodeportã€‚</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-delete-å‘½ä»¤è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">kubectl delete å‘½ä»¤è¯¦è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/2/CKA/23.kubectl%E5%91%BD%E4%BB%A4.html#kubectl-edit-å‘½ä»¤è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">kubectl edit å‘½ä»¤è¯¦è§£</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="kubectlå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#kubectlå‘½ä»¤" aria-hidden="true">#</a> kubectlå‘½ä»¤</h1><h2 id="kubectlå‘½ä»¤è¡Œç®¡ç†å·¥å…·" tabindex="-1"><a class="header-anchor" href="#kubectlå‘½ä»¤è¡Œç®¡ç†å·¥å…·" aria-hidden="true">#</a> Kubectlå‘½ä»¤è¡Œç®¡ç†å·¥å…·</h2><blockquote><h3 id="åŸºç¡€å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€å‘½ä»¤" aria-hidden="true">#</a> åŸºç¡€å‘½ä»¤</h3></blockquote><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"><strong>create é€šè¿‡æ–‡ä»¶åæˆ–æ ‡å‡†è¾“å…¥åˆ›å»ºèµ„æº</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"><strong>expose ä¸ºDeploymentï¼Œpodåˆ›å»ºService</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"><strong>run åœ¨é›†ç¾¤ä¸­è¿è¡Œä¸€ä¸ªç‰¹å®šçš„é•œåƒ</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-3"><strong>set åœ¨å¯¹è±¡ä¸Šè®¾ç½®ç‰¹å®šçš„åŠŸèƒ½</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-4"><strong>explain æ–‡æ¡£å‚è€ƒèµ„æ–™</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-5" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-5"><strong>get æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªèµ„æº</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-6" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-6"><strong>edit ä½¿ç”¨ç³»ç»Ÿç¼–è¾‘å™¨ç¼–è¾‘ä¸€ä¸ªèµ„æº</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-7" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-7"><strong>delete é€šè¿‡æ–‡ä»¶åã€æ ‡å‡†è¾“å…¥ã€èµ„æºåç§°æˆ–æ ‡ç­¾é€‰æ‹©å™¨æ¥åˆ é™¤èµ„æº</strong></label></li></ul><blockquote><h3 id="éƒ¨ç½²å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²å‘½ä»¤" aria-hidden="true">#</a> <strong>éƒ¨ç½²å‘½ä»¤</strong></h3></blockquote><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-8" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-8"><strong>rollout ç®¡ç†Deploymentã€Daemonsetèµ„æºçš„å‘å¸ƒï¼ˆä¾‹å¦‚çŠ¶æ€ã€å‘å¸ƒè®°å½•ã€å›æ»šç­‰ï¼‰</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-9" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-9"><strong>rolling-update æ»šåŠ¨å‡çº§ã€ä»…é™ReplicationController</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-10" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-10"><strong>scale å¯¹Deploymentã€ReplicaSetã€RCæˆ–è€…Jobèµ„æºæ‰©å®¹æˆ–è€…ä¼¸ç¼©Podæ•°é‡</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-11" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-11"><strong>autoscale å¯¹Deployã€RSã€RCé…ç½®è‡ªåŠ¨ä¼¸ç¼©è§„åˆ™ï¼ˆä¾èµ–metrics-serverå’Œhpaï¼‰</strong></label></li></ul><blockquote><h3 id="é›†ç¾¤ç®¡ç†å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#é›†ç¾¤ç®¡ç†å‘½ä»¤" aria-hidden="true">#</a> <strong>é›†ç¾¤ç®¡ç†å‘½ä»¤</strong></h3></blockquote><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-12" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-12"><strong>certificate ä¿®æ”¹è¯ä¹¦èµ„æº</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-13" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-13"><strong>cluster-info æ˜¾ç¤ºé›†ç¾¤ä¿¡æ¯</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-14" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-14"><strong>top æŸ¥çœ‹èµ„æºåˆ©ç”¨ç‡ï¼ˆä¾èµ–metrics-serverï¼‰</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-15" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-15"><strong>cordon æ ‡è®°èŠ‚ç‚¹ä¸å¯è°ƒåº¦</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-16" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-16"><strong>uncordon æ ‡è®°èŠ‚ç‚¹å¯ä»¥è°ƒåº¦</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-17" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-17"><strong>drain é©±é€èŠ‚ç‚¹ä¸Šçš„åº”ç”¨ï¼Œå‡†å¤‡ä¸‹çº¿ç»´æŠ¤</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-18" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-18"><strong>taint ä¿®æ”¹èŠ‚ç‚¹taintæ ‡è®°</strong></label></li></ul><blockquote><h3 id="æ•…éšœè¯Šæ–­å’Œè°ƒè¯•å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#æ•…éšœè¯Šæ–­å’Œè°ƒè¯•å‘½ä»¤" aria-hidden="true">#</a> <strong>æ•…éšœè¯Šæ–­å’Œè°ƒè¯•å‘½ä»¤</strong></h3></blockquote><ul class="task-list-container"><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-19" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-19"><strong>describe æ˜¾ç¤ºèµ„æºä¿¡æ¯</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-20" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-20"><strong>logs æ˜¾ç¤ºPodå†…å®¹å™¨æ—¥å¿—ï¼Œå¦‚æœPodæœ‰å¤šä¸ªå®¹å™¨ï¼Œ-c å‚æ•°æŒ‡å®šå®¹å™¨åç§°</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-21" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-21"><strong>attach é™„åŠ åˆ°Podçš„å†…çš„ä¸€ä¸ªå®¹å™¨</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-22" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-22"><strong>exec åœ¨å®¹å™¨æ‰§è¡Œå‘½ä»¤</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-23" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-23"><strong>port-forward ä¸ºPodåˆ›å»ºæœ¬åœ°ç«¯å£æ˜ å°„</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-24" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-24"><strong>proxy ä¸ºKubernetes API serveråˆ›å»ºä»£ç†</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-25" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-25"><strong>cp æ‹·è´æ–‡ä»¶æˆ–è€…ç›®å½•åˆ°å®¹å™¨ä¸­ï¼Œæˆ–è€…ä»å®¹å™¨å†…å‘å¤–æ‹·è´</strong></label></p></li></ul><blockquote><h3 id="é«˜çº§å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#é«˜çº§å‘½ä»¤" aria-hidden="true">#</a> <strong>é«˜çº§å‘½ä»¤</strong></h3></blockquote><ul class="task-list-container"><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-26" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-26"><strong>apply ä»æ–‡ä»¶åæˆ–è€…æ ‡å‡†è¾“å…¥å¯¹èµ„æºçš„åˆ›å»º/æ›´æ–°</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-27" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-27"><strong>patch ä½¿ç”¨è¡¥ä¸æ–¹å¼ä¿®æ”¹ã€æ›´æ–°èµ„æºçš„æŸäº›å­—æ®µ</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-28" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-28"><strong>replace ä»æ–‡ä»¶åæˆ–è€…æ ‡å‡†è¾“å…¥æ›¿æ¢ä¸€ä¸ªèµ„æº</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-29" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-29"><strong>convert åœ¨ä¸åŒAPIç‰ˆæœ¬ä¹‹é—´è½¬æ¢å¯¹è±¡å®šä¹‰</strong></label></p></li></ul><blockquote><h3 id="è®¾ç½®å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®å‘½ä»¤" aria-hidden="true">#</a> <strong>è®¾ç½®å‘½ä»¤</strong></h3></blockquote><ul class="task-list-container"><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-30" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-30"><strong>label ç»™èµ„æºè®¾ç½®ã€æ›´æ–°æ ‡ç­¾</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-31" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-31"><strong>annotate ç»™èµ„æºè®¾ç½®ã€æ›´æ–°æ³¨è§£</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-32" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-32"><strong>completion kubectlå·¥å…·è‡ªåŠ¨è¡¥å…¨ï¼Œsource &lt; (kubectl completion bash) (ä¾èµ–è½¯ä»¶åŒ…bash-completion)</strong></label></p></li></ul><blockquote><h3 id="å…¶ä»–å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–å‘½ä»¤" aria-hidden="true">#</a> <strong>å…¶ä»–å‘½ä»¤</strong></h3></blockquote><ul class="task-list-container"><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-33" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-33"><strong>api-resources æŸ¥çœ‹æ‰€æœ‰èµ„æº</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-34" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-34"><strong>api-versions æ‰“å°å—æ”¯æŒçš„APIç‰ˆæœ¬</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-35" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-35"><strong>config ä¿®æ”¹kubeconfigæ–‡ä»¶ ï¼ˆç”¨äºè®¿é—®APIï¼Œæ¯”å¦‚é…ç½®è®¤è¯ä¿¡æ¯ï¼‰</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-36" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-36"><strong>help æ‰€æœ‰å‘½ä»¤å¸®åŠ©</strong></label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-37" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-37"><strong>version æŸ¥çœ‹kubectlå’Œk8sç‰ˆæœ¬</strong></label></p></li></ul><h2 id="kubectl-run-å‘½ä»¤è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#kubectl-run-å‘½ä»¤è¯¦è§£" aria-hidden="true">#</a> <code>kubectl run å‘½ä»¤è¯¦è§£</code></h2><ul><li>åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨é•œåƒã€‚</li><li>åˆ›å»ºä¸€ä¸ªdeployment æˆ–job æ¥ç®¡ç†å®¹å™¨ã€‚</li></ul><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ run NAME <span class="token parameter variable">--image</span><span class="token operator">=</span>image <span class="token punctuation">[</span>--env<span class="token operator">=</span><span class="token string">&quot;key=value&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--port<span class="token operator">=</span>port<span class="token punctuation">]</span> <span class="token punctuation">[</span>--replicas<span class="token operator">=</span>replicas<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token operator">=</span>bool<span class="token punctuation">]</span> <span class="token punctuation">[</span>--overrides<span class="token operator">=</span>inline-json<span class="token punctuation">]</span> <span class="token punctuation">[</span>--command<span class="token punctuation">]</span> -- <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>å¯åŠ¨nginxå®ä¾‹ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl run nginx <span class="token parameter variable">--image</span><span class="token operator">=</span>nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åŠ¨hazelcastå®ä¾‹ï¼Œæš´éœ²å®¹å™¨ç«¯å£ 5701ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl run hazelcast <span class="token parameter variable">--image</span><span class="token operator">=</span>hazelcast <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">5701</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åŠ¨hazelcastå®ä¾‹ï¼Œåœ¨å®¹å™¨ä¸­è®¾ç½®ç¯å¢ƒå˜é‡â€œDNS_DOMAIN = clusterâ€å’Œâ€œPOD_NAMESPACE = defaultâ€ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl run hazelcast <span class="token parameter variable">--image</span><span class="token operator">=</span>hazelcast <span class="token parameter variable">--env</span><span class="token operator">=</span><span class="token string">&quot;DNS_DOMAIN=cluster&quot;</span> <span class="token parameter variable">--env</span><span class="token operator">=</span><span class="token string">&quot;POD_NAMESPACE=default&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åŠ¨nginxå®ä¾‹ï¼Œè®¾ç½®å‰¯æœ¬æ•°5ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl run nginx <span class="token parameter variable">--image</span><span class="token operator">=</span>nginx <span class="token parameter variable">--replicas</span><span class="token operator">=</span><span class="token number">5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿è¡Œ Dry æ‰“å°ç›¸åº”çš„APIå¯¹è±¡è€Œä¸åˆ›å»ºå®ƒä»¬ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl run nginx <span class="token parameter variable">--image</span><span class="token operator">=</span>nginx --dry-run
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-exposeå‘½ä»¤è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#kubectl-exposeå‘½ä»¤è¯¦è§£" aria-hidden="true">#</a> <code>kubectl exposeå‘½ä»¤è¯¦è§£</code></h2><p>å°†èµ„æºæš´éœ²ä¸ºæ–°çš„Kubernetes Serviceã€‚</p><ul><li><p>æŒ‡å®š<a href="http://docs.kubernetes.org.cn/317.html" target="_blank" rel="noopener noreferrer">deployment<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€serviceã€<a href="http://docs.kubernetes.org.cn/314.html" target="_blank" rel="noopener noreferrer">replica set<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€<a href="http://docs.kubernetes.org.cn/437.html" target="_blank" rel="noopener noreferrer">replication controller<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æˆ–<a href="http://docs.kubernetes.org.cn/312.html" target="_blank" rel="noopener noreferrer">pod<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ï¼Œå¹¶ä½¿ç”¨è¯¥èµ„æºçš„é€‰æ‹©å™¨ä½œä¸ºæŒ‡å®šç«¯å£ä¸Šæ–°æœåŠ¡çš„é€‰æ‹©å™¨ã€‚deployment æˆ– replica setåªæœ‰å½“å…¶é€‰æ‹©å™¨å¯è½¬æ¢ä¸ºserviceæ”¯æŒçš„é€‰æ‹©å™¨æ—¶ï¼Œå³å½“é€‰æ‹©å™¨ä»…åŒ…å«matchLabelsç»„ä»¶æ—¶æ‰ä¼šä½œä¸ºæš´éœ²æ–°çš„Serviceã€‚</p></li><li><p>èµ„æºåŒ…æ‹¬(ä¸åŒºåˆ†å¤§å°å†™)ï¼š</p></li><li><p>podï¼ˆpoï¼‰ï¼Œserviceï¼ˆsvcï¼‰ï¼Œreplication controllerï¼ˆrcï¼‰ï¼Œdeploymentï¼ˆdeployï¼‰ï¼Œreplica setï¼ˆrsï¼‰</p></li></ul><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ expose <span class="token punctuation">(</span>-f FILENAME <span class="token operator">|</span> TYPE NAME<span class="token punctuation">)</span> <span class="token punctuation">[</span>--port<span class="token operator">=</span>port<span class="token punctuation">]</span> <span class="token punctuation">[</span>--protocol<span class="token operator">=</span>TCP<span class="token operator">|</span>UDP<span class="token punctuation">]</span> <span class="token punctuation">[</span>--target-port<span class="token operator">=</span>number-or-name<span class="token punctuation">]</span> <span class="token punctuation">[</span>--name<span class="token operator">=</span>name<span class="token punctuation">]</span> <span class="token punctuation">[</span>--external-ip<span class="token operator">=</span>external-ip-of-service<span class="token punctuation">]</span> <span class="token punctuation">[</span>--type<span class="token operator">=</span>type<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>ä¸ºRCçš„nginxåˆ›å»ºserviceï¼Œå¹¶é€šè¿‡Serviceçš„80ç«¯å£è½¬å‘è‡³å®¹å™¨çš„8000ç«¯å£ä¸Šã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl expose rc nginx <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç”±â€œnginx-controller.yamlâ€ä¸­æŒ‡å®šçš„typeå’Œnameæ ‡è¯†çš„RCåˆ›å»ºServiceï¼Œå¹¶é€šè¿‡Serviceçš„80ç«¯å£è½¬å‘è‡³å®¹å™¨çš„8000ç«¯å£ä¸Šã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl expose <span class="token parameter variable">-f</span> nginx-controller.yaml <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-annotate-å‘½ä»¤è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#kubectl-annotate-å‘½ä»¤è¯¦è§£" aria-hidden="true">#</a> <code>kubectl annotate å‘½ä»¤è¯¦è§£</code></h2><p>æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºçš„Annotationsä¿¡æ¯ã€‚</p><ul><li>Annotationsç”±key/valueç»„æˆã€‚</li><li>Annotationsçš„ç›®çš„æ˜¯å­˜å‚¨è¾…åŠ©æ•°æ®ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡å·¥å…·å’Œç³»ç»Ÿæ‰©å±•æ“ä½œçš„æ•°æ®ï¼Œæ›´å¤šä»‹ç»åœ¨<a href="http://docs.kubernetes.org.cn/255.html" target="_blank" rel="noopener noreferrer">è¿™é‡Œ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</li><li>å¦‚æœ--overwriteä¸ºtrueï¼Œç°æœ‰çš„annotationså¯ä»¥è¢«è¦†ç›–ï¼Œå¦åˆ™è¯•å›¾è¦†ç›–annotationså°†ä¼šæŠ¥é”™ã€‚</li><li>å¦‚æœè®¾ç½®äº†--resource-versionï¼Œåˆ™æ›´æ–°å°†ä½¿ç”¨æ­¤resource versionï¼Œå¦åˆ™å°†ä½¿ç”¨åŸæœ‰çš„resource versionã€‚</li></ul><blockquote><h3 id="æœ‰æ•ˆèµ„æºç±»å‹åŒ…æ‹¬" tabindex="-1"><a class="header-anchor" href="#æœ‰æ•ˆèµ„æºç±»å‹åŒ…æ‹¬" aria-hidden="true">#</a> æœ‰æ•ˆèµ„æºç±»å‹åŒ…æ‹¬ï¼š</h3><ul><li>all</li><li>certificatesigningrequests (aka &#39;csr&#39;)</li><li>clusterrolebindings</li><li>clusterroles</li><li>clusters (valid only for federation apiservers)</li><li>componentstatuses (aka &#39;cs&#39;)</li><li>configmaps (aka &#39;cm&#39;)</li><li>controllerrevisions</li><li>cronjobs</li><li>daemonsets (aka &#39;ds&#39;)</li><li>deployments (aka &#39;deploy&#39;)</li><li>endpoints (aka &#39;ep&#39;)</li><li>events (aka &#39;ev&#39;)</li><li>horizontalpodautoscalers (aka &#39;hpa&#39;)</li><li>ingresses (aka &#39;ing&#39;)</li><li>jobs</li><li>limitranges (aka &#39;limits&#39;)</li><li>namespaces (aka &#39;ns&#39;)</li><li>networkpolicies (aka &#39;netpol&#39;)</li><li>nodes (aka &#39;no&#39;)</li><li>persistentvolumeclaims (aka &#39;pvc&#39;)</li><li>persistentvolumes (aka &#39;pv&#39;)</li><li>poddisruptionbudgets (aka &#39;pdb&#39;)</li><li>podpreset</li><li>pods (aka &#39;po&#39;)</li><li>podsecuritypolicies (aka &#39;psp&#39;)</li><li>podtemplates</li><li>replicasets (aka &#39;rs&#39;)</li><li>replicationcontrollers (aka &#39;rc&#39;)</li><li>resourcequotas (aka &#39;quota&#39;)</li><li>rolebindings</li><li>roles</li><li>secrets</li><li>serviceaccounts (aka &#39;sa&#39;)</li><li>services (aka &#39;svc&#39;)</li><li>statefulsets</li><li>storageclasses</li><li>thirdpartyresources</li></ul></blockquote><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ annotate <span class="token punctuation">[</span>--overwrite<span class="token punctuation">]</span> <span class="token punctuation">(</span>-f FILENAME <span class="token operator">|</span> TYPE NAME<span class="token punctuation">)</span> <span class="token assign-left variable">KEY_1</span><span class="token operator">=</span>VAL_1 <span class="token punctuation">..</span>. <span class="token assign-left variable">KEY_N</span><span class="token operator">=</span>VAL_N <span class="token punctuation">[</span>--resource-version<span class="token operator">=</span>version<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>æ›´æ–°Podâ€œfooâ€ï¼Œè®¾ç½®annotation â€œdescriptionâ€çš„value â€œmy frontendâ€ï¼Œå¦‚æœåŒä¸€ä¸ªannotationå¤šæ¬¡è®¾ç½®ï¼Œåˆ™åªä½¿ç”¨æœ€åè®¾ç½®çš„valueå€¼ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl annotate pods foo <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">&#39;my frontend&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ ¹æ®â€œpod.jsonâ€ä¸­çš„typeå’Œnameæ›´æ–°podçš„annotation</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl annotate <span class="token parameter variable">-f</span> pod.json <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">&#39;my frontend&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ›´æ–°Pod&quot;foo&quot;ï¼Œè®¾ç½®annotationâ€œdescriptionâ€çš„valueâ€œmy frontend running nginxâ€ï¼Œè¦†ç›–ç°æœ‰çš„å€¼ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl annotate <span class="token parameter variable">--overwrite</span> pods foo <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">&#39;my frontend running nginx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ›´æ–° namespaceä¸­çš„æ‰€æœ‰pod</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl annotate pods <span class="token parameter variable">--all</span> <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">&#39;my frontend running nginx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åªæœ‰å½“resource-versionä¸º1æ—¶ï¼Œæ‰æ›´æ–°pod &#39; foo &#39;ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl annotate pods foo <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">&#39;my frontend running nginx&#39;</span> --resource-version<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é€šè¿‡åˆ é™¤åä¸ºâ€œdescriptionâ€çš„annotationsæ¥æ›´æ–°pod &#39; foo &#39;ã€‚#ä¸éœ€è¦- overwrite flagã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl annotate pods foo description-
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-autoscale-å‘½ä»¤è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#kubectl-autoscale-å‘½ä»¤è¯¦è§£" aria-hidden="true">#</a> <code>kubectl autoscale å‘½ä»¤è¯¦è§£</code></h2><ul><li>ä½¿ç”¨ autoscaler è‡ªåŠ¨è®¾ç½®åœ¨kubernetesé›†ç¾¤ä¸­è¿è¡Œçš„podæ•°é‡ï¼ˆæ°´å¹³è‡ªåŠ¨ä¼¸ç¼©ï¼‰ã€‚</li><li>æŒ‡å®šDeploymentã€ReplicaSetæˆ–ReplicationControllerï¼Œå¹¶åˆ›å»ºå·²ç»å®šä¹‰å¥½èµ„æºçš„è‡ªåŠ¨ä¼¸ç¼©å™¨ã€‚ä½¿ç”¨è‡ªåŠ¨ä¼¸ç¼©å™¨å¯ä»¥æ ¹æ®éœ€è¦è‡ªåŠ¨å¢åŠ æˆ–å‡å°‘ç³»ç»Ÿä¸­éƒ¨ç½²çš„podæ•°é‡ã€‚</li></ul><p><strong>è¯­æ³•</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ autoscale (-f FILENAME | TYPE NAME | TYPE/NAME) [--min=MINPODS] --max=MAXPODS [--cpu-percent=CPU] [flags]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>ä½¿ç”¨ Deployment â€œfooâ€è®¾å®šï¼Œä½¿ç”¨é»˜è®¤çš„è‡ªåŠ¨ä¼¸ç¼©ç­–ç•¥ï¼ŒæŒ‡å®šç›®æ ‡CPUä½¿ç”¨ç‡ï¼Œä½¿å…¶Podæ•°é‡åœ¨2åˆ°10ä¹‹é—´ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ kubectl autoscale deployment foo --min=2 --max=10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨RCâ€œfooâ€è®¾å®šï¼Œä½¿å…¶Podçš„æ•°é‡ä»‹äº1å’Œ5ä¹‹é—´ï¼ŒCPUä½¿ç”¨ç‡ç»´æŒåœ¨80ï¼…ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ kubectl autoscale rc foo --max=5 --cpu-percent=80
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-create-å‘½ä»¤è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#kubectl-create-å‘½ä»¤è¯¦è§£" aria-hidden="true">#</a> <code>kubectl create å‘½ä»¤è¯¦è§£</code></h2><ul><li>é€šè¿‡é…ç½®æ–‡ä»¶åæˆ–stdinåˆ›å»ºä¸€ä¸ªé›†ç¾¤èµ„æºå¯¹è±¡ã€‚</li><li>æ”¯æŒJSONå’ŒYAMLæ ¼å¼çš„æ–‡ä»¶ã€‚</li></ul><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ create <span class="token parameter variable">-f</span> FILENAME
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>é€šè¿‡pod.jsonæ–‡ä»¶åˆ›å»ºä¸€ä¸ªpodã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token parameter variable">-f</span> ./pod.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é€šè¿‡stdinçš„JSONåˆ›å»ºä¸€ä¸ªpodã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">cat</span> pod.json <span class="token operator">|</span> kubectl create <span class="token parameter variable">-f</span> -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>APIç‰ˆæœ¬ä¸ºv1çš„JSONæ ¼å¼çš„docker-registry.yamlæ–‡ä»¶åˆ›å»ºèµ„æºã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token parameter variable">-f</span> docker-registry.yaml <span class="token parameter variable">--edit</span> --output-version<span class="token operator">=</span>v1 <span class="token parameter variable">-o</span> json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-create-clusterrole" tabindex="-1"><a class="header-anchor" href="#kubectl-create-clusterrole" aria-hidden="true">#</a> <code>kubectl create clusterrole</code></h2><ul><li>ClusterRoleæ˜¯ä¸€ç»„æƒé™çš„é›†åˆï¼Œä½†ä¸Roleä¸åŒçš„æ˜¯ï¼ŒClusterRoleå¯ä»¥åœ¨åŒ…æ‹¬æ‰€æœ‰NameSpceå’Œé›†ç¾¤çº§åˆ«çš„èµ„æºæˆ–éèµ„æºç±»å‹è¿›è¡Œé‰´æƒã€‚</li><li>é€šè¿‡YAMLèµ„æºå®šä¹‰æ¸…å•åˆ›å»ºClusterRole</li></ul><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ clusterrole NAME <span class="token parameter variable">--verb</span><span class="token operator">=</span>verb <span class="token parameter variable">--resource</span><span class="token operator">=</span>resource.group <span class="token punctuation">[</span>--resource-name<span class="token operator">=</span>resourcename<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>åˆ›å»ºä¸€ä¸ªåä¸ºâ€œpod-readerâ€çš„ClusterRoleï¼Œå…è®¸ç”¨æˆ·åœ¨podä¸Šæ‰§è¡Œâ€œgetâ€ï¼Œâ€œwatchâ€å’Œâ€œlistâ€</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create clusterrole pod-reader <span class="token parameter variable">--verb</span><span class="token operator">=</span>get,list,watch <span class="token parameter variable">--resource</span><span class="token operator">=</span>pods
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»ºä¸€ä¸ªåä¸ºâ€œpod-readerâ€çš„ClusterRoleï¼Œå…¶ä¸­æŒ‡å®šäº†ResourceName</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create clusterrole pod-reader <span class="token parameter variable">--verb</span><span class="token operator">=</span>get,list,watch <span class="token parameter variable">--resource</span><span class="token operator">=</span>pods --resource-name<span class="token operator">=</span>readablepod --resource-name<span class="token operator">=</span>anotherpod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨æŒ‡å®šçš„API Groupä¸­åˆ›å»ºä¸º&quot;foo&quot;çš„ClusterRole</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create clusterrole foo <span class="token parameter variable">--verb</span><span class="token operator">=</span>get,list,watch <span class="token parameter variable">--resource</span><span class="token operator">=</span>rs.extensions
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»ºä¸€ä¸ªåä¸ºâ€œfooâ€çš„ClusterRoleï¼Œå¹¶æŒ‡å®šSubResource</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create clusterrole foo <span class="token parameter variable">--verb</span><span class="token operator">=</span>get,list,watch <span class="token parameter variable">--resource</span><span class="token operator">=</span>pods,pods/status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨æŒ‡å®šçš„NonResourceURLåˆ›å»ºåç§°â€œfooâ€çš„ClusterRole</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create clusterrole <span class="token string">&quot;foo&quot;</span> <span class="token parameter variable">--verb</span><span class="token operator">=</span>get --non-resource-url<span class="token operator">=</span>/logs/*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-create-clusterrolebinding" tabindex="-1"><a class="header-anchor" href="#kubectl-create-clusterrolebinding" aria-hidden="true">#</a> <code>kubectl create clusterrolebinding</code></h2><p>è§’è‰²ç»‘å®šå°†ä¸€ä¸ªè§’è‰²ä¸­å®šä¹‰çš„å„ç§æƒé™æˆäºˆä¸€ä¸ªæˆ–è€…ä¸€ç»„ç”¨æˆ·ï¼Œåˆ™è¯¥ç”¨æˆ·æˆ–ç”¨æˆ·ç»„åˆ™å…·æœ‰å¯¹åº”ç»‘å®šçš„Roleæˆ–ClusterRoleå®šä¹‰çš„æƒé™ã€‚ è§’è‰²ç»‘å®šåŒ…å«äº†ä¸€ç»„ç›¸å…³ä¸»ä½“ï¼ˆå³subject, åŒ…æ‹¬ç”¨æˆ·â€”â€”Userã€ç”¨æˆ·ç»„â€”â€”Groupã€æˆ–è€…æœåŠ¡è´¦æˆ·â€”â€”Service Accountï¼‰ä»¥åŠå¯¹è¢«æˆäºˆè§’è‰²çš„å¼•ç”¨ã€‚ åœ¨æŸä¸€namespaceä¸­å¯ä»¥é€šè¿‡RoleBindingå¯¹è±¡æˆäºˆæƒé™ï¼Œè€Œé›†ç¾¤èŒƒå›´çš„æƒé™æˆäºˆåˆ™é€šè¿‡ClusterRoleBindingå¯¹è±¡å®Œæˆã€‚</p><ul><li>RoleBinding</li><li>RoleBindingå¯ä»¥å°†åŒä¸€namespaceä¸­çš„subjectï¼ˆç”¨æˆ·ï¼‰ç»‘å®šåˆ°æŸä¸ªå…·æœ‰ç‰¹å®šæƒé™çš„Roleä¸‹ï¼Œåˆ™æ­¤subjectå³å…·æœ‰è¯¥Roleå®šä¹‰çš„æƒé™ã€‚</li><li>ä¸ºç‰¹å®šçš„ClusterRoleåˆ›å»ºClusterRoleBindingã€‚</li></ul><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ clusterrolebinding NAME <span class="token parameter variable">--clusterrole</span><span class="token operator">=</span>NAME <span class="token punctuation">[</span>--user<span class="token operator">=</span>username<span class="token punctuation">]</span> <span class="token punctuation">[</span>--group<span class="token operator">=</span>groupname<span class="token punctuation">]</span> <span class="token punctuation">[</span>--serviceaccount<span class="token operator">=</span>namespace:serviceaccountname<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>åœ¨é›†ç¾¤èŒƒå›´å°†cluster-admin ClusterRoleæˆäºˆç”¨æˆ·user1ï¼Œuser2å’Œgroup1ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create clusterrolebinding cluster-admin <span class="token parameter variable">--clusterrole</span><span class="token operator">=</span>cluster-admin <span class="token parameter variable">--user</span><span class="token operator">=</span>user1 <span class="token parameter variable">--user</span><span class="token operator">=</span>user2 <span class="token parameter variable">--group</span><span class="token operator">=</span>group1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-create-quota" tabindex="-1"><a class="header-anchor" href="#kubectl-create-quota" aria-hidden="true">#</a> <code>kubectl create quota</code></h2><p>èµ„æºé…é¢(Resource Quotas)æ˜¯ç”¨æ¥é™åˆ¶ç”¨æˆ·èµ„æºç”¨é‡çš„ä¸€ç§æœºåˆ¶ã€‚ å®ƒçš„å·¥ä½œåŸç†ä¸ºï¼š</p><ul><li>èµ„æºé…é¢åº”ç”¨åœ¨Namespaceä¸Šï¼Œå¹¶ä¸”æ¯ä¸ªNamespaceæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªResourceQuotaå¯¹è±¡</li><li>å¼€å¯è®¡ç®—èµ„æºé…é¢åï¼Œåˆ›å»ºå®¹å™¨æ—¶å¿…é¡»é…ç½®è®¡ç®—èµ„æºè¯·æ±‚æˆ–é™åˆ¶(ä¹Ÿå¯ä»¥LimitRangeè®¾ç½®é»˜è®¤å€¼)</li><li>ç”¨æˆ·è¶…é¢åç¦æ­¢åˆ›å»ºæ–°çš„èµ„æº</li></ul><blockquote><h3 id="èµ„æºé…é¢çš„å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#èµ„æºé…é¢çš„å¯ç”¨" aria-hidden="true">#</a> èµ„æºé…é¢çš„å¯ç”¨</h3></blockquote><p><strong>é¦–å…ˆï¼Œåœ¨API Serverå¯åŠ¨æ—¶é…ç½®ResourceQuota adminssion controlï¼Œç„¶ååœ¨namespaceä¸­åˆ›å»ºResourceQuotaå¯¹è±¡å³å¯ã€‚</strong></p><blockquote><h3 id="èµ„æºé…é¢çš„ç±»å‹" tabindex="-1"><a class="header-anchor" href="#èµ„æºé…é¢çš„ç±»å‹" aria-hidden="true">#</a> èµ„æºé…é¢çš„ç±»å‹</h3></blockquote><ul><li><strong><code>è®¡ç®—èµ„æºï¼ŒåŒ…æ‹¬cpuå’Œmemory</code></strong><ul><li>cpuï¼Œlimits.cpuï¼Œrequests.cpu</li><li>memoryï¼Œlimits.memoryï¼Œrequests.memory</li></ul></li><li><strong><code>å­˜å‚¨èµ„æºï¼ŒåŒ…æ‹¬å­˜å‚¨èµ„æºçš„æ€»é‡ä»¥åŠåˆ¶å®šçš„storage classçš„æ€»é‡</code></strong><ul><li>requests.storageï¼šå­˜å‚¨èµ„æºæ€»é‡ï¼Œå¦‚500Gi</li><li>persistentvolumeclaimsï¼špvcçš„ä¸ªæ•°</li><li>.storageclass.storage.k8s.io/requests.storage</li><li>.storageclass.storage.k8s.io/persistentvolumeclaims</li></ul></li><li><strong><code>å¯¹è±¡æ•°ï¼Œå³å¯åˆ›å»ºçš„å¯¹è±¡çš„ä¸ªæ•°</code></strong><ul><li>pods, replicationcontrollers, configmaps, secrets</li><li>resourcequotas, persistentvolumeclaims</li><li>services, services.loadbalancers, services.nodeports</li></ul></li></ul><p><strong>åˆ›å»ºå…·æœ‰æŒ‡å®šåç§°ã€hardé™åˆ¶å’Œå¯é€‰scopesçš„resourcequota</strong></p><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">quota</span> NAME <span class="token punctuation">[</span>--hard<span class="token operator">=</span>key1<span class="token operator">=</span>value1,key2<span class="token operator">=</span>value2<span class="token punctuation">]</span> <span class="token punctuation">[</span>--scopes<span class="token operator">=</span>Scope1,Scope2<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token operator">=</span>bool<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>åˆ›å»ºåä¸ºmy-quotaçš„resourcequota</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token function">quota</span> my-quota <span class="token parameter variable">--hard</span><span class="token operator">=</span>cpu<span class="token operator">=</span><span class="token number">1</span>,memory<span class="token operator">=</span>1G,pods<span class="token operator">=</span><span class="token number">2</span>,services<span class="token operator">=</span><span class="token number">3</span>,replicationcontrollers<span class="token operator">=</span><span class="token number">2</span>,resourcequotas<span class="token operator">=</span><span class="token number">1</span>,secrets<span class="token operator">=</span><span class="token number">5</span>,persistentvolumeclaims<span class="token operator">=</span><span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»ºåä¸ºbest-effortçš„resourcequota</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token function">quota</span> best-effort <span class="token parameter variable">--hard</span><span class="token operator">=</span>pods<span class="token operator">=</span><span class="token number">100</span> <span class="token parameter variable">--scopes</span><span class="token operator">=</span>BestEffort
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><h3 id="limitrange" tabindex="-1"><a class="header-anchor" href="#limitrange" aria-hidden="true">#</a> LimitRange</h3></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkubernetesä¸­æ‰€æœ‰å®¹å™¨éƒ½æ²¡æœ‰ä»»ä½•cpuå’Œå†…å­˜é™åˆ¶ã€‚limitRangeç”¨æ¥ç»™Namespaceå¢åŠ ä¸€ä¸ªèµ„æºé™åˆ¶ï¼ŒåŒ…æ‹¬æœ€å°ã€æœ€å¤§å’Œé»˜è®¤èµ„æºã€‚æ¯”å¦‚ï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> LimitRange
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mylimits
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">limits</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">max</span><span class="token punctuation">:</span>
      <span class="token key atrule">cpu</span><span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span>
      <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1Gi
    <span class="token key atrule">min</span><span class="token punctuation">:</span>
      <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 200m
      <span class="token key atrule">memory</span><span class="token punctuation">:</span> 6Mi
    <span class="token key atrule">type</span><span class="token punctuation">:</span> Pod
  <span class="token punctuation">-</span> <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 300m
      <span class="token key atrule">memory</span><span class="token punctuation">:</span> 200Mi
    <span class="token key atrule">defaultRequest</span><span class="token punctuation">:</span>
      <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 200m
      <span class="token key atrule">memory</span><span class="token punctuation">:</span> 100Mi
    <span class="token key atrule">max</span><span class="token punctuation">:</span>
      <span class="token key atrule">cpu</span><span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span>
      <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1Gi
    <span class="token key atrule">min</span><span class="token punctuation">:</span>
      <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 100m
      <span class="token key atrule">memory</span><span class="token punctuation">:</span> 3Mi
    <span class="token key atrule">type</span><span class="token punctuation">:</span> Container
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="kubectl-create-role" tabindex="-1"><a class="header-anchor" href="#kubectl-create-role" aria-hidden="true">#</a> <code>kubectl create role</code></h2><p>Roleæ˜¯ä¸€ç»„æƒé™çš„é›†åˆï¼Œä¾‹å¦‚Roleå¯ä»¥åŒ…å«åˆ—å‡ºPodæƒé™åŠåˆ—å‡ºDeploymentæƒé™ï¼ŒRoleç”¨äºç»™æŸä¸ªNameSpaceä¸­çš„èµ„æºè¿›è¡Œé‰´æƒã€‚</p><p><strong>ä½¿ç”¨å•ä¸€è§„åˆ™åˆ›å»ºRoleã€‚</strong></p><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ role NAME <span class="token parameter variable">--verb</span><span class="token operator">=</span>verb <span class="token parameter variable">--resource</span><span class="token operator">=</span>resource.group/subresource <span class="token punctuation">[</span>--resource-name<span class="token operator">=</span>resourcename<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>åˆ›å»ºåä¸ºâ€œpod-readerâ€çš„Role ï¼Œå…è®¸ç”¨æˆ·åœ¨podä¸Šæ‰§è¡Œâ€œgetâ€ï¼Œâ€œwatchâ€å’Œâ€œlistâ€</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create role pod-reader <span class="token parameter variable">--verb</span><span class="token operator">=</span>get <span class="token parameter variable">--verb</span><span class="token operator">=</span>list <span class="token parameter variable">--verb</span><span class="token operator">=</span>watch <span class="token parameter variable">--resource</span><span class="token operator">=</span>pods
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»ºåä¸ºâ€œpod-readerâ€çš„Roleï¼Œå¹¶æŒ‡å®šResourceName</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create role pod-reader <span class="token parameter variable">--verb</span><span class="token operator">=</span>get,list,watch <span class="token parameter variable">--resource</span><span class="token operator">=</span>pods --resource-name<span class="token operator">=</span>readablepod --resource-name<span class="token operator">=</span>anotherpod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨æŒ‡å®šçš„API Group åˆ›å»ºåä¸ºâ€œfooâ€çš„Role</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create role foo <span class="token parameter variable">--verb</span><span class="token operator">=</span>get,list,watch <span class="token parameter variable">--resource</span><span class="token operator">=</span>rs.extensions
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨æŒ‡å®šçš„SubResourceåˆ›å»ºåä¸ºâ€œfooâ€çš„Role</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create role foo <span class="token parameter variable">--verb</span><span class="token operator">=</span>get,list,watch <span class="token parameter variable">--resource</span><span class="token operator">=</span>pods,pods/status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>é€šè¿‡YAMLèµ„æºå®šä¹‰æ¸…å•åˆ›å»ºRole</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Role
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>role
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span>
  <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;pods&quot;</span><span class="token punctuation">]</span>
  <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;watch&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="kubectl-create-rolebinding" tabindex="-1"><a class="header-anchor" href="#kubectl-create-rolebinding" aria-hidden="true">#</a> <code>kubectl create rolebinding</code></h2><ul><li><code>RoleBinding</code>å‘ä¸€ä¸ªæˆ–ä¸€ç»„ç”¨æˆ·æˆäºˆåœ¨<code>Role</code>ä¸­å®šä¹‰çš„æƒé™ã€‚å®ƒåŒ…å«<code>subjects</code>ï¼ˆUserï¼ŒGroupæˆ–Service Accountï¼‰ï¼Œä»¥åŠå¯¹æ‰€æˆäºˆè§’è‰²çš„å¼•ç”¨ã€‚å¯ä»¥åœ¨namespaceä¸­ä½¿ç”¨RoleBindingæˆ–åœ¨é›†ç¾¤èŒƒå›´å†…ä½¿ç”¨ClusterRoleBindingã€‚</li><li>RoleBindingå¯ä»¥å¼•ç”¨åŒä¸€namespaceä¸‹çš„Roleã€‚</li><li>roleRefæ˜¯å®é™…åˆ›å»ºç»‘å®šçš„æ–¹å¼ã€‚è¯¥kindå¯ä»¥æ˜¯Roleæˆ–ClusterRoleï¼Œå¹¶ä¸”nameå°†å¼•ç”¨å…·ä½“åå­—çš„Roleæˆ–ClusterRole</li><li>ClusterRoleBindingå¯ä»¥åœ¨é›†ç¾¤çº§åˆ«å’Œæ‰€æœ‰namespaceä¸­æˆäºˆæƒé™ã€‚</li></ul><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ rolebinding NAME <span class="token parameter variable">--clusterrole</span><span class="token operator">=</span>NAME<span class="token operator">|</span>--role<span class="token operator">=</span>NAME <span class="token punctuation">[</span>--user<span class="token operator">=</span>username<span class="token punctuation">]</span> <span class="token punctuation">[</span>--group<span class="token operator">=</span>groupname<span class="token punctuation">]</span> <span class="token punctuation">[</span>--serviceaccount<span class="token operator">=</span>namespace:serviceaccountname<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>å°†admin ClusterRoleæˆäºˆuser1ï¼Œuser2å’Œgroup1ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create rolebinding admin <span class="token parameter variable">--clusterrole</span><span class="token operator">=</span>admin <span class="token parameter variable">--user</span><span class="token operator">=</span>user1 <span class="token parameter variable">--user</span><span class="token operator">=</span>user2 <span class="token parameter variable">--group</span><span class="token operator">=</span>group1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-create-service" tabindex="-1"><a class="header-anchor" href="#kubectl-create-service" aria-hidden="true">#</a> <code>kubectl create service</code></h2><ul><li>Kubernetes Serviceå®šä¹‰äº†è¿™æ ·ä¸€ç§æŠ½è±¡ï¼š Serviceæ˜¯ä¸€ç§å¯ä»¥è®¿é—® Podé€»è¾‘åˆ†ç»„çš„ç­–ç•¥ï¼Œ Serviceé€šå¸¸æ˜¯é€šè¿‡ Label Selectorè®¿é—® Podç»„ã€‚</li><li>Serviceèƒ½å¤Ÿæä¾›è´Ÿè½½å‡è¡¡çš„èƒ½åŠ›ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨ä¸Šæœ‰ä»¥ä¸‹é™åˆ¶ï¼šåªæä¾› 4 å±‚è´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼Œè€Œæ²¡æœ‰ 7 å±‚åŠŸèƒ½ï¼Œä½†æœ‰æ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦æ›´å¤šçš„åŒ¹é…è§„åˆ™æ¥è½¬å‘è¯·æ±‚ï¼Œè¿™ç‚¹ä¸Š 4 å±‚è´Ÿè½½å‡è¡¡æ˜¯ä¸æ”¯æŒçš„</li></ul><blockquote><h3 id="service-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#service-ç±»å‹" aria-hidden="true">#</a> <strong>Service ç±»å‹</strong></h3></blockquote><p>Serviceåœ¨ K8sä¸­æœ‰ä»¥ä¸‹å››ç§ç±»å‹ï¼š</p><p><strong><code>â‘  ClusterIp</code></strong></p><ul><li>é»˜è®¤ç±»å‹ï¼Œè‡ªåŠ¨åˆ†é…ä¸€ä¸ªä»…Clusterå†…éƒ¨å¯ä»¥è®¿é—®çš„è™šæ‹ŸIP</li></ul><p><strong><code>â‘¡ NodePort</code></strong></p><ul><li>åœ¨ClusterIPåŸºç¡€ä¸Šä¸ºServiceåœ¨æ¯å°æœºå™¨ä¸Šç»‘å®šä¸€ä¸ªç«¯å£ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡: NodePortæ¥è®¿é—®è¯¥æœåŠ¡ã€‚</li></ul><p><strong><code>â‘¢ LoadBalancer</code></strong></p><ul><li>åœ¨NodePortçš„åŸºç¡€ä¸Šï¼Œå€ŸåŠ©Cloud Provideråˆ›å»ºä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°NodePort</li></ul><p><strong><code>â‘£ ExternalName</code></strong></p><ul><li>æŠŠé›†ç¾¤å¤–éƒ¨çš„æœåŠ¡å¼•å…¥åˆ°é›†ç¾¤å†…éƒ¨æ¥ï¼Œåœ¨é›†ç¾¤å†…éƒ¨ç›´æ¥ä½¿ç”¨ã€‚æ²¡æœ‰ä»»ä½•ç±»å‹ä»£ç†è¢«åˆ›å»ºï¼Œè¿™åªæœ‰ Kubernetes 1.7æˆ–æ›´é«˜ç‰ˆæœ¬çš„kube-dnsæ‰æ”¯æŒã€‚</li></ul><blockquote><h3 id="åˆ›å»ºå…·æœ‰æŒ‡å®šserviceåçš„clusteripã€‚" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå…·æœ‰æŒ‡å®šserviceåçš„clusteripã€‚" aria-hidden="true">#</a> åˆ›å»ºå…·æœ‰æŒ‡å®šServiceåçš„clusterIPã€‚</h3></blockquote><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ clusterip NAME <span class="token punctuation">[</span>--tcp<span class="token operator">=</span><span class="token operator">&lt;</span>port<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>targetPort<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>åˆ›å»ºServiceåä¸ºmy-csä¸ºçš„clusterIP</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token function">service</span> clusterip my-cs <span class="token parameter variable">--tcp</span><span class="token operator">=</span><span class="token number">5678</span>:8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»ºServiceåä¸ºmy-csçš„clusterIPï¼ˆheadlessæ¨¡å¼ï¼‰</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token function">service</span> clusterip my-cs <span class="token parameter variable">--clusterip</span><span class="token operator">=</span><span class="token string">&quot;None&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><h3 id="åˆ›å»ºæŒ‡å®šserviceåçš„externalnameã€‚" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæŒ‡å®šserviceåçš„externalnameã€‚" aria-hidden="true">#</a> åˆ›å»ºæŒ‡å®šServiceåçš„ExternalNameã€‚</h3></blockquote><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ externalname NAME --external-name external.name <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>åˆ›å»ºServiceåä¸ºmy-nsçš„ExternalName</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token function">service</span> externalname my-ns --external-name bar.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><h3 id="åˆ›å»ºä¸€ä¸ªæŒ‡å®šåç§°çš„serviceçš„loadbalancerã€‚" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªæŒ‡å®šåç§°çš„serviceçš„loadbalancerã€‚" aria-hidden="true">#</a> åˆ›å»ºä¸€ä¸ªæŒ‡å®šåç§°çš„Serviceçš„LoadBalancerã€‚</h3></blockquote><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ loadbalancer NAME <span class="token punctuation">[</span>--tcp<span class="token operator">=</span>port:targetPort<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>åˆ›å»ºä¸€ä¸ªServiceåä¸ºmy-lbsçš„LoadBalancerã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token function">service</span> loadbalancer my-lbs <span class="token parameter variable">--tcp</span><span class="token operator">=</span><span class="token number">5678</span>:8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><h3 id="åˆ›å»ºæŒ‡å®šserviceåç§°çš„nodeportã€‚" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæŒ‡å®šserviceåç§°çš„nodeportã€‚" aria-hidden="true">#</a> åˆ›å»ºæŒ‡å®šServiceåç§°çš„nodeportã€‚</h3></blockquote><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ nodeport NAME <span class="token punctuation">[</span>--tcp<span class="token operator">=</span>port:targetPort<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>åˆ›å»ºserviceåä¸ºmy-nsçš„æ–°çš„nodeportã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create <span class="token function">service</span> nodeport my-ns <span class="token parameter variable">--tcp</span><span class="token operator">=</span><span class="token number">5678</span>:8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-delete-å‘½ä»¤è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#kubectl-delete-å‘½ä»¤è¯¦è§£" aria-hidden="true">#</a> <code>kubectl delete å‘½ä»¤è¯¦è§£</code></h2><ul><li>é€šè¿‡é…ç½®æ–‡ä»¶åã€stdinã€èµ„æºåç§°æˆ–labelé€‰æ‹©å™¨æ¥åˆ é™¤èµ„æºã€‚</li><li>æ”¯æŒJSONå’ŒYAMLæ ¼å¼æ–‡ä»¶ã€‚å¯ä»¥åªæŒ‡å®šä¸€ç§ç±»å‹çš„å‚æ•°ï¼šæ–‡ä»¶åã€èµ„æºåç§°æˆ–labelé€‰æ‹©å™¨ã€‚</li><li>æœ‰äº›èµ„æºï¼Œå¦‚podï¼Œæ”¯æŒä¼˜é›…çš„ï¼ˆgracefulï¼‰åˆ é™¤ï¼Œå› ä¸ºè¿™äº›èµ„æºä¸€èˆ¬æ˜¯é›†ç¾¤ä¸­çš„å®ä½“ï¼Œæ‰€ä»¥åˆ é™¤ä¸å¯èƒ½ä¼šç«‹å³ç”Ÿæ•ˆï¼Œè¿™äº›èµ„æºåœ¨å¼ºåˆ¶ç»ˆæ­¢ä¹‹å‰é»˜è®¤å®šä¹‰äº†ä¸€ä¸ªå‘¨æœŸï¼ˆå®½é™æœŸï¼‰ï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨--grace-period flagæ¥è¦†ç›–è¯¥å€¼ï¼Œæˆ–è€…é€šè¿‡pass --nowè®¾ç½®è¯¥å‘¨æœŸä¸º1ã€‚</li><li>å¦‚æœæ‰˜ç®¡Podçš„NodeèŠ‚ç‚¹å·²ç»åœæ­¢æˆ–è€…æ— æ³•è¿æ¥API Serverï¼Œä½¿ç”¨deleteå‘½ä»¤åˆ é™¤Podéœ€ç­‰å¾…æ—¶é—´æ›´é•¿ã€‚è¦å¼ºåˆ¶åˆ é™¤èµ„æºï¼Œéœ€æŒ‡å®š- force flagï¼Œä¸”è®¾ç½®å‘¨æœŸï¼ˆå®½é™æœŸï¼‰ä¸º0ã€‚</li><li>å¦‚æœæ‰§è¡Œå¼ºåˆ¶åˆ é™¤Podï¼Œåˆ™è°ƒåº¦ç¨‹åºä¼šåœ¨èŠ‚ç‚¹é‡Šæ”¾è¿™äº›Podä¹‹å‰å°†æ–°çš„Podæ”¾åœ¨è¿™äº›èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä½¿ä¹‹å‰Podç«‹å³è¢«é€å‡ºã€‚</li><li>æ³¨æ„ï¼šæ‰§è¡Œdeleteå‘½ä»¤æ—¶ä¸ä¼šæ£€æŸ¥èµ„æºç‰ˆæœ¬ï¼Œå¦‚æœåœ¨æ‰§è¡Œdeleteæ“ä½œæ—¶æœ‰äººè¿›è¡Œäº†æ›´æ–°æ“ä½œï¼Œé‚£ä¹ˆæ›´æ–°æ“ä½œå°†è¿åŒèµ„æºä¸€èµ·è¢«åˆ é™¤ã€‚</li></ul><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ delete <span class="token punctuation">(</span><span class="token punctuation">[</span>-f FILENAME<span class="token punctuation">]</span> <span class="token operator">|</span> TYPE <span class="token punctuation">[</span><span class="token punctuation">(</span>NAME <span class="token operator">|</span> <span class="token parameter variable">-l</span> label <span class="token operator">|</span> --all<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>ä½¿ç”¨ pod.jsonä¸­æŒ‡å®šçš„èµ„æºç±»å‹å’Œåç§°åˆ é™¤podã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl delete <span class="token parameter variable">-f</span> ./pod.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ ¹æ®ä¼ å…¥stdinçš„JSONæ‰€æŒ‡å®šçš„ç±»å‹å’Œåç§°åˆ é™¤podã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">cat</span> pod.json <span class="token operator">|</span> kubectl delete <span class="token parameter variable">-f</span> -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ é™¤åä¸ºâ€œbazâ€å’Œâ€œfooâ€çš„Podå’ŒServiceã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl delete pod,service baz foo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ é™¤ Label name = myLabelçš„podå’ŒServiceã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl delete pods,services <span class="token parameter variable">-l</span> <span class="token assign-left variable">name</span><span class="token operator">=</span>myLabel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¼ºåˆ¶åˆ é™¤dead nodeä¸Šçš„pod</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl delete pod foo --grace-period<span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">--force</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ é™¤æ‰€æœ‰pod</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl delete pods <span class="token parameter variable">--all</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubectl-edit-å‘½ä»¤è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#kubectl-edit-å‘½ä»¤è¯¦è§£" aria-hidden="true">#</a> <code>kubectl edit å‘½ä»¤è¯¦è§£</code></h2><ul><li>ä½¿ç”¨é»˜è®¤ç¼–è¾‘å™¨ ç¼–è¾‘æœåŠ¡å™¨ä¸Šå®šä¹‰çš„èµ„æºã€‚</li><li>ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·è·å–çš„ä»»ä½•èµ„æºéƒ½å¯ä»¥ä½¿ç”¨editå‘½ä»¤ç¼–è¾‘ã€‚editå‘½ä»¤ä¼šæ‰“å¼€ä½¿ç”¨KUBE_EDITORï¼ŒGIT_EDITOR æˆ–è€…EDITORç¯å¢ƒå˜é‡å®šä¹‰çš„ç¼–è¾‘å™¨ï¼Œå¯ä»¥åŒæ—¶ç¼–è¾‘å¤šä¸ªèµ„æºï¼Œä½†æ‰€ç¼–è¾‘è¿‡çš„èµ„æºåªä¼šä¸€æ¬¡æ€§æäº¤ã€‚edité™¤å‘½ä»¤å‚æ•°å¤–è¿˜æ¥å—æ–‡ä»¶åå½¢å¼ã€‚</li><li>æ–‡ä»¶é»˜è®¤è¾“å‡ºæ ¼å¼ä¸ºYAMLã€‚è¦ä»¥JSONæ ¼å¼ç¼–è¾‘ï¼Œè¯·æŒ‡å®šâ€œ-o jsonâ€é€‰é¡¹ã€‚</li><li>å¦‚æœåœ¨æ›´æ–°èµ„æºæ—¶æŠ¥é”™ï¼Œå°†ä¼šåœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶æ¥è®°å½•ã€‚åœ¨æ›´æ–°èµ„æºæ—¶æœ€å¸¸è§çš„é”™è¯¯æ˜¯å‡ ä¸ªç”¨æˆ·åŒæ—¶ä½¿ç”¨ç¼–è¾‘å™¨æ›´æ”¹æœåŠ¡å™¨ä¸Šèµ„æºï¼Œå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä½ éœ€è¦å°†ä½ çš„æ›´æ”¹åº”ç”¨åˆ°æœ€æ–°ç‰ˆæœ¬çš„èµ„æºä¸Šï¼Œæˆ–è€…æ›´æ–°ä¿å­˜çš„ä¸´æ—¶å‰¯æœ¬ã€‚</li></ul><p><strong>è¯­æ³•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ edit <span class="token punctuation">(</span>RESOURCE/NAME <span class="token operator">|</span> <span class="token parameter variable">-f</span> FILENAME<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç¤ºä¾‹</strong></p><p>ç¼–è¾‘åä¸º&#39;docker-registry&#39;çš„serviceï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl edit svc/docker-registry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨æ›¿ä»£çš„ç¼–è¾‘å™¨</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token assign-left variable">KUBE_EDITOR</span><span class="token operator">=</span><span class="token string">&quot;nano&quot;</span> kubectl edit svc/docker-registry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¼–è¾‘åä¸ºâ€œmyjobâ€çš„serviceï¼Œè¾“å‡ºJSONæ ¼å¼ V1 APIç‰ˆæœ¬</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl edit job.v1.batch/myjob <span class="token parameter variable">-o</span> json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»¥YAMLæ ¼å¼è¾“å‡ºç¼–è¾‘deploymentâ€œmydeploymentâ€ï¼Œå¹¶å°†ä¿®æ”¹çš„é…ç½®ä¿å­˜åœ¨annotationä¸­ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl edit deployment/mydeployment <span class="token parameter variable">-o</span> yaml --save-config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/demo/theme-docs/src/zh/isKcount/2/CKA/23.kubectlå‘½ä»¤.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: admin@example.com">Administrator</span><!--]--><!--]--></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2022 isKcount</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.85823306.js" defer></script>
  </body>
</html>
