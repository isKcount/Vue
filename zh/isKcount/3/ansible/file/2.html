<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/zh/isKcount/3/ansible/file/2.html"><meta property="og:site_name" content="æ–‡æ¡£æ¼”ç¤º"><meta property="og:title" content="AnsibleåŸºç¡€æ¨¡å—"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-10-11T05:08:11.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="2022-01-27T13:47:02.000Z"><meta property="article:modified_time" content="2022-10-11T05:08:11.000Z"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>AnsibleåŸºç¡€æ¨¡å— | æ–‡æ¡£æ¼”ç¤º</title><meta name="description" content="vuepress-theme-hope çš„æ–‡æ¡£æ¼”ç¤º">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.7cb9ac72.css">
    <link rel="modulepreload" href="/assets/app.85823306.js"><link rel="modulepreload" href="/assets/2.html.f4bec0e4.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/2.html.9247b989.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/zh" class="brand"><img class="logo" src="/logo.svg" alt="æ–‡æ¡£æ¼”ç¤º"><!----><span class="site-name hide-in-pad">æ–‡æ¡£æ¼”ç¤º</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/zh" class="nav-link" aria-label="isKcount"><span class="icon iconfont icon-home"></span>isKcount<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åˆ†ç±»"><span class="title"><span class="icon iconfont icon-interact"></span>åˆ†ç±»</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zh/isKcount/1/" class="nav-link" aria-label="å­¦ä¹ è·¯çº¿è§„åˆ’"><span class="icon iconfont icon-ability"></span>å­¦ä¹ è·¯çº¿è§„åˆ’<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/2/" class="nav-link" aria-label="è€ƒè¯"><span class="icon iconfont icon-relation"></span>è€ƒè¯<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/3/" class="nav-link active" aria-label="è¿ç»´ç¬”è®°"><span class="icon iconfont icon-linux"></span>è¿ç»´ç¬”è®°<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/4/" class="nav-link" aria-label="åç«¯å¼€å‘ç¬”è®°"><span class="icon iconfont icon-note"></span>åç«¯å¼€å‘ç¬”è®°<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/5/" class="nav-link" aria-label="å‰ç«¯å¼€å‘ç¬”è®°"><span class="icon iconfont icon-like"></span>å‰ç«¯å¼€å‘ç¬”è®°<!----></a></li><li class="dropdown-item"><a href="/zh/isKcount/6/" class="nav-link" aria-label="ä¸­é—´ä»¶æœåŠ¡ç¬”è®°"><span class="icon iconfont icon-api"></span>ä¸­é—´ä»¶æœåŠ¡ç¬”è®°<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Devops"><span class="title"><span class="icon iconfont icon-select"></span>Devops</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zh/cicd/git/" class="nav-link" aria-label="Gitå¼€å‘æ‰‹å†Œ"><span class="icon iconfont icon-git"></span>Gitå¼€å‘æ‰‹å†Œ<!----></a></li><li class="dropdown-item"><a href="/zh/cicd/ci/" class="nav-link" aria-label="CICD"><span class="icon iconfont icon-ci"></span>CICD<!----></a></li><li class="dropdown-item"><a href="/zh/cicd/istio/" class="nav-link" aria-label="Istio"><span class="icon iconfont icon-material"></span>Istio<!----></a></li><li class="dropdown-item"><a href="/zh/cicd/operator/" class="nav-link" aria-label="Operator"><span class="icon iconfont icon-proxy"></span>Operator<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://wallhaven.cc/" rel="noopener noreferrer" target="_blank" aria-label="Wallhaven" class="nav-link"><span class="icon iconfont icon-autumn"></span>Wallhaven<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zh/isKcount/" class="nav-link sidebar-link sidebar-page" aria-label="æŒ‡å—"><span class="icon iconfont icon-creative"></span>æŒ‡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-ability"></span><span class="title">å­¦ä¹ è·¯çº¿è§„åˆ’</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-relation"></span><span class="title">è€ƒè¯</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-linux"></span><span class="title">è¿ç»´ç¬”è®°</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-linux"></span><span class="title">Linux</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-module"></span><span class="title">KVMè™šæ‹ŸåŒ–æŠ€æœ¯</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-semantic"></span><span class="title">Ansible</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/zh/isKcount/3/ansible/file/1.html" class="nav-link sidebar-link sidebar-page" aria-label="AnsibleåŸºç¡€"><!---->AnsibleåŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="AnsibleåŸºç¡€æ¨¡å—"><!---->AnsibleåŸºç¡€æ¨¡å—<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#ansibleå¸¸ç”¨æ¨¡å—-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Ansibleå¸¸ç”¨æ¨¡å—"><!---->Ansibleå¸¸ç”¨æ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#hostnameæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="hostnameæ¨¡å—"><!---->hostnameæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#useræ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useræ¨¡å—"><!---->useræ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#groupæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="groupæ¨¡å—"><!---->groupæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#commandæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="commandæ¨¡å—"><!---->commandæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#shellæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="shellæ¨¡å—"><!---->shellæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#copyæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="copyæ¨¡å—"><!---->copyæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#yum-repositoryæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="yum_repositoryæ¨¡å—"><!---->yum_repositoryæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#yumæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="yumæ¨¡å—"><!---->yumæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#serviceæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="serviceæ¨¡å—"><!---->serviceæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#scriptæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="scriptæ¨¡å—"><!---->scriptæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#fetch-fileæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="fetch+fileæ¨¡å—"><!---->fetch+fileæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#cronæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="cronæ¨¡å—"><!---->cronæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#unarchiveæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="unarchiveæ¨¡å—"><!---->unarchiveæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#åˆ©ç”¨æ¨¡å—å¿«é€Ÿéƒ¨ç½²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ©ç”¨æ¨¡å—å¿«é€Ÿéƒ¨ç½²"><!---->åˆ©ç”¨æ¨¡å—å¿«é€Ÿéƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#ä½¿ç”¨playbookçš„æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨playbookçš„æ–¹å¼"><!---->ä½¿ç”¨playbookçš„æ–¹å¼<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/zh/isKcount/3/ansible/file/3.html" class="nav-link sidebar-link sidebar-page" aria-label="Ansibleçš„Playbook"><!---->Ansibleçš„Playbook<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/isKcount/3/ansible/file/4.html" class="nav-link sidebar-link sidebar-page" aria-label="Ansibleçš„Role"><!---->Ansibleçš„Role<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/isKcount/3/ansible/file/5.html" class="nav-link sidebar-link sidebar-page" aria-label="Ansibleéƒ¨ç½²é€»è¾‘å·"><!---->Ansibleéƒ¨ç½²é€»è¾‘å·<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/isKcount/3/ansible/file/6.html" class="nav-link sidebar-link sidebar-page" aria-label="Ansibleéƒ¨ç½²ä¸»ä»æ•°æ®åº“"><!---->Ansibleéƒ¨ç½²ä¸»ä»æ•°æ®åº“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/isKcount/3/ansible/file/7.html" class="nav-link sidebar-link sidebar-page" aria-label="Ansibleéƒ¨ç½²galeraé›†ç¾¤"><!---->Ansibleéƒ¨ç½²galeraé›†ç¾¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/isKcount/3/ansible/file/8.html" class="nav-link sidebar-link sidebar-page" aria-label="Ansibleéƒ¨ç½²kafkaé›†ç¾¤"><!---->Ansibleéƒ¨ç½²kafkaé›†ç¾¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/isKcount/3/ansible/file/9.html" class="nav-link sidebar-link sidebar-page" aria-label="Ansibleéƒ¨ç½²Rabbitmqé›†ç¾¤"><!---->Ansibleéƒ¨ç½²Rabbitmqé›†ç¾¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/isKcount/3/ansible/file/10.html" class="nav-link sidebar-link sidebar-page" aria-label="Ansibleéƒ¨ç½²zabbix"><!---->Ansibleéƒ¨ç½²zabbix<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">åç«¯å¼€å‘ç¬”è®°</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-like"></span><span class="title">å‰ç«¯å¼€å‘ç¬”è®°</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-api"></span><span class="title">ä¸­é—´ä»¶æœåŠ¡ç¬”è®°</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->AnsibleåŸºç¡€æ¨¡å—</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://iskcount.github.io" target="_blank" rel="noopener noreferrer">isKcount</a></span><span property="author" content="isKcount"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´1æœˆ27æ—¥</span><meta property="datePublished" content="2022-01-27T13:47:02.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 14 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT14M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#ansibleå¸¸ç”¨æ¨¡å—-1" class="router-link-active router-link-exact-active toc-link level3">Ansibleå¸¸ç”¨æ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#hostnameæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">hostnameæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#useræ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">useræ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#groupæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">groupæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#commandæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">commandæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#shellæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">shellæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#copyæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">copyæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#yum-repositoryæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">yum_repositoryæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#yumæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">yumæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#serviceæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">serviceæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#scriptæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">scriptæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#fetch-fileæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">fetch+fileæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#cronæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">cronæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#unarchiveæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">unarchiveæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#åˆ©ç”¨æ¨¡å—å¿«é€Ÿéƒ¨ç½²" class="router-link-active router-link-exact-active toc-link level3">åˆ©ç”¨æ¨¡å—å¿«é€Ÿéƒ¨ç½²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/isKcount/3/ansible/file/2.html#ä½¿ç”¨playbookçš„æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨playbookçš„æ–¹å¼</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="ansibleå¸¸ç”¨æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#ansibleå¸¸ç”¨æ¨¡å—" aria-hidden="true">#</a> Ansibleå¸¸ç”¨æ¨¡å—</h1><blockquote><h3 id="ansibleå¸¸ç”¨æ¨¡å—-1" tabindex="-1"><a class="header-anchor" href="#ansibleå¸¸ç”¨æ¨¡å—-1" aria-hidden="true">#</a> Ansibleå¸¸ç”¨æ¨¡å—</h3></blockquote><h3 id="hostnameæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#hostnameæ¨¡å—" aria-hidden="true">#</a> hostnameæ¨¡å—</h3><ul><li><strong>ç”¨äºç®¡ç†è¿œç¨‹ä¸»æœºçš„ä¸»æœºå</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>name: å¿…é€‰é¡¹ï¼Œä¸»æœºåç§°

æ›´æ”¹ä¸»æœºå
<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible 192.168.100.20 -m hostname -a &#39;name=node99&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="useræ¨¡å—" tabindex="-1"><a class="header-anchor" href="#useræ¨¡å—" aria-hidden="true">#</a> useræ¨¡å—</h3><ul><li><strong>ç”¨äºåˆ›å»ºç”¨æˆ·ä»¥åŠä¿®æ”¹ç”¨æˆ·çš„æƒé™</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Userï¼šç®¡ç†ç”¨æˆ·

   home   æŒ‡å®šå®¶ç›®å½•è·¯å¾„
   system æŒ‡å®šç³»ç»Ÿè´¦å·
   group  æŒ‡å®šç»„
   remove æ¸…é™¤è´¦æˆ·
   shell  æŒ‡å®šshellç±»å‹

   ansible websrvs <span class="token parameter variable">-m</span> user <span class="token parameter variable">-a</span> <span class="token string">&#39;name=user1 comment=&quot;test user&quot; uid=2048 home=/app/user1 group=root&#39;</span>
   ansible websrvs <span class="token parameter variable">-m</span> user <span class="token parameter variable">-a</span> <span class="token string">&#39;name=sysuser1 system=yes home=/app/sysuser1&#39;</span>
   ansible websrvs <span class="token parameter variable">-m</span> user <span class="token parameter variable">-a</span> <span class="token string">&#39;name=user1 state=absent remove=yes&#39;</span>  æ¸…ç©ºç”¨æˆ·æ‰€æœ‰æ•°æ®
   ansible websrvs <span class="token parameter variable">-m</span> user <span class="token parameter variable">-a</span> <span class="token string">&#39;name=app uid=88 system=yes home=/app groups=root shell=/sbin/nologin password=&quot;$1$zfVojmPy$ZILcvxnXljvTI2PhP2Iqv1&quot;&#39;</span>  åˆ›å»ºç”¨æˆ·
   ansible websrvs <span class="token parameter variable">-m</span> user <span class="token parameter variable">-a</span> <span class="token string">&#39;name=app state=absent&#39;</span>  ä¸ä¼šåˆ é™¤å®¶ç›®å½•
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="groupæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#groupæ¨¡å—" aria-hidden="true">#</a> groupæ¨¡å—</h3><ul><li><strong>ç”¨äºåˆ›å»ºç»„å’Œä¿®æ”¹ç»„çš„æƒé™æ“ä½œ</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Groupï¼šç®¡ç†ç»„

<span class="token assign-left variable">state</span><span class="token operator">=</span>presentè¡¨ç¤ºåˆ›å»ºç»„ï¼Œstate<span class="token operator">=</span>absentæ—¶è¡¨ç¤ºåˆ é™¤ç»„ï¼›
<span class="token assign-left variable">syste</span><span class="token operator">=</span>yesè¡¨ç¤ºåˆ›å»ºç³»ç»Ÿç»„ï¼Œsystem<span class="token operator">=</span>noè¡¨ç¤ºåˆ›å»ºçš„ä¸æ˜¯ç³»ç»Ÿç»„ï¼›

	ansible srv <span class="token parameter variable">-m</span> group <span class="token parameter variable">-a</span> <span class="token string">&quot;name=testgroup system=yes&quot;</span>   åˆ›å»ºç»„
  	ansible srv <span class="token parameter variable">-m</span> group <span class="token parameter variable">-a</span> <span class="token string">&quot;name=testgroup state=absent&quot;</span> åˆ é™¤ç»„
  	åœ¨testç»„åŒ…å«çš„è¢«æ§ç«¯ä¸Šåˆ›å»ºç»„testgroupï¼Œç»„idä¸º111
	ansible <span class="token builtin class-name">test</span> <span class="token parameter variable">-m</span> group <span class="token parameter variable">-a</span> <span class="token string">&#39;name =testgroup gid=111 state=present system=yes&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="commandæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#commandæ¨¡å—" aria-hidden="true">#</a> commandæ¨¡å—</h3><ul><li><strong>åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤ï¼Œé»˜è®¤æ¨¡å—ï¼Œå¯å¿½ç•¥-mé€‰é¡¹</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> chdir:   è¿›å…¥åˆ°è¢«ç®¡ç†ä¸»æœºç›®å½•
 creates: å¦‚æœæœ‰ä¸€ä¸ªç›®å½•æ˜¯å­˜åœ¨çš„,æ­¥éª¤å°†ä¸ä¼šè¿è¡ŒCommandå‘½ä»¤
 ansible websrvs <span class="token parameter variable">-a</span> <span class="token string">&#39;chdir=/data/ ls&#39;</span>
 
 <span class="token operator">&gt;</span> ansible srvs <span class="token parameter variable">-m</span> <span class="token builtin class-name">command</span> <span class="token parameter variable">-a</span> <span class="token string">&#39;service vsftpd start&#39;</span>
 <span class="token operator">&gt;</span> ansible srvs <span class="token parameter variable">-m</span> <span class="token builtin class-name">command</span> <span class="token parameter variable">-a</span> <span class="token string">&#39;echo adong |passwd --stdin 123456&#39;</span>
 <span class="token comment">#æ­¤å‘½ä»¤ä¸æ”¯æŒ $VARNAME &lt; &gt; | ; &amp; ç­‰,ç”¨shellæ¨¡å—å®ç°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Playbookç”¨æ³•</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> return motd to registered var
  <span class="token key atrule">command</span><span class="token punctuation">:</span> cat /etc/motd
  <span class="token key atrule">register</span><span class="token punctuation">:</span> mymotd
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run command if /path/to/database does not exist (without &#39;args&#39; keyword).
  <span class="token key atrule">command</span><span class="token punctuation">:</span> /usr/bin/make_database.sh db_user db_name creates=/path/to/database
<span class="token comment"># &#39;args&#39; is a task keyword, passed at the same level as the module</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run command if /path/to/database does not exist (with &#39;args&#39; keyword).
  <span class="token key atrule">command</span><span class="token punctuation">:</span> /usr/bin/make_database.sh db_user db_name
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">creates</span><span class="token punctuation">:</span> /path/to/database
<span class="token comment"># &#39;cmd&#39; is module parameter</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run command if /path/to/database does not exist (with &#39;cmd&#39; parameter).
  <span class="token key atrule">command</span><span class="token punctuation">:</span>
    <span class="token key atrule">cmd</span><span class="token punctuation">:</span> /usr/bin/make_database.sh db_user db_name
    <span class="token key atrule">creates</span><span class="token punctuation">:</span> /path/to/database  
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Change the working directory to somedir/ and run the command as db_owner if /path/to/database does not exist.
  <span class="token key atrule">command</span><span class="token punctuation">:</span> /usr/bin/make_database.sh db_user db_name
  <span class="token key atrule">become</span><span class="token punctuation">:</span> yes
  <span class="token key atrule">become_user</span><span class="token punctuation">:</span> db_owner
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">chdir</span><span class="token punctuation">:</span> somedir/
    <span class="token key atrule">creates</span><span class="token punctuation">:</span> /path/to/database
<span class="token comment"># &#39;argv&#39; is a parameter, indented one level from the module</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Use &#39;argv&#39; to send a command as a list <span class="token punctuation">-</span> leave &#39;command&#39; empty
  <span class="token key atrule">command</span><span class="token punctuation">:</span>
    <span class="token key atrule">argv</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /usr/bin/make_database.sh
      <span class="token punctuation">-</span> Username with whitespace
      <span class="token punctuation">-</span> dbname with whitespace     
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> safely use templated variable to run command. Always use the quote filter to avoid injection issues.
  <span class="token key atrule">command</span><span class="token punctuation">:</span> cat <span class="token punctuation">{</span><span class="token punctuation">{</span> myfile<span class="token punctuation">|</span>quote <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">register</span><span class="token punctuation">:</span> myoutput
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="shellæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#shellæ¨¡å—" aria-hidden="true">#</a> shellæ¨¡å—</h3><ul><li><strong>å’Œcommandç›¸ä¼¼ï¼Œç”¨shellæ‰§è¡Œå‘½ä»¤</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>   ä¿®æ”¹é…ç½®æ–‡ä»¶,ä½¿shellä½œä¸ºé»˜è®¤æ¨¡å—    

       <span class="token function">vim</span> /etc/ansible/ansible.cfg
       module_name <span class="token operator">=</span> shell
       
   <span class="token operator">&gt;</span> ansible all <span class="token parameter variable">-m</span> shell  <span class="token parameter variable">-a</span> <span class="token string">&#39;getenforce&#39;</span>  æŸ¥çœ‹SELINUXçŠ¶æ€
   <span class="token operator">&gt;</span>  ansible all <span class="token parameter variable">-m</span> shell  <span class="token parameter variable">-a</span> <span class="token string">&quot;sed -i &#39;s/SELINUX=.*/SELINUX=disabled&#39;     	/etc/selinux/config&quot;</span>
   <span class="token operator">&gt;</span> ansible srv <span class="token parameter variable">-m</span> shell <span class="token parameter variable">-a</span> <span class="token string">&#39;echo magedu |passwd â€“stdin wang&#39;</span>

   è°ƒç”¨bashæ‰§è¡Œå‘½ä»¤ ç±»ä¼¼ <span class="token function">cat</span> /tmp/stanley.md <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">&#39;|&#39;</span> <span class="token string">&#39;{print $1,$2}&#39;</span> <span class="token operator">&amp;&gt;</span> /tmp/example.txt 
   è¿™äº›å¤æ‚å‘½ä»¤ï¼Œå³ä½¿ä½¿ç”¨shellä¹Ÿå¯èƒ½ä¼šå¤±è´¥ï¼Œ
   è§£å†³åŠæ³•ï¼šå†™åˆ°è„šæœ¬æ—¶ï¼Œcopyåˆ°è¿œç¨‹æ‰§è¡Œï¼Œå†æŠŠéœ€è¦çš„ç»“æœæ‹‰å›æ‰§è¡Œå‘½ä»¤çš„æœºå™¨ 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Playbookç”¨æ³•</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Execute the command in remote shell; stdout goes to the specified file on the remote.
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> somescript.sh <span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span> somelog.txt
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Change the working directory to somedir/ before executing the command.
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> somescript.sh <span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span> somelog.txt
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">chdir</span><span class="token punctuation">:</span> somedir/
<span class="token comment"># You can also use the &#39;args&#39; form to provide the options.</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> This command will change the working directory to somedir/ and will only run when somedir/somelog.txt doesn&#39;t exist.
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> somescript.sh <span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span> somelog.txt
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">chdir</span><span class="token punctuation">:</span> somedir/
    <span class="token key atrule">creates</span><span class="token punctuation">:</span> somelog.txt
<span class="token comment"># You can also use the &#39;cmd&#39; parameter instead of free form format.</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> This command will change the working directory to somedir/.
  <span class="token key atrule">shell</span><span class="token punctuation">:</span>
    <span class="token key atrule">cmd</span><span class="token punctuation">:</span> ls <span class="token punctuation">-</span>l <span class="token punctuation">|</span> grep log
    <span class="token key atrule">chdir</span><span class="token punctuation">:</span> somedir/
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run a command that uses non<span class="token punctuation">-</span>posix shell<span class="token punctuation">-</span>isms (in this example /bin/sh doesn&#39;t handle redirection and wildcards together but bash does)
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> cat &lt; /tmp/<span class="token important">*txt</span>
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">executable</span><span class="token punctuation">:</span> /bin/bash
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run a command using a templated variable (always use quote filter to avoid injection)
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> cat <span class="token punctuation">{</span><span class="token punctuation">{</span> myfile<span class="token punctuation">|</span>quote <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token comment"># You can use shell to run other executables to perform actions inline</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run expect to wait for a successful PXE boot via out<span class="token punctuation">-</span>of<span class="token punctuation">-</span>band CIMC
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    set timeout 300
    spawn ssh admin@{{ cimc_host }}
    expect &quot;password:&quot;
    send &quot;{{ cimc_password }}\n&quot;
    expect &quot;\n{{ cimc_name }}&quot;
    send &quot;connect host\n&quot;
    expect &quot;pxeboot.n12&quot;
    send &quot;\n&quot;
    exit 0</span>
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">executable</span><span class="token punctuation">:</span> /usr/bin/expect
  <span class="token key atrule">delegate_to</span><span class="token punctuation">:</span> localhost
<span class="token comment"># Disabling warnings</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Using curl to connect to a host via SOCKS proxy (unsupported in uri). Ordinarily this would throw a warning.
  <span class="token key atrule">shell</span><span class="token punctuation">:</span> curl <span class="token punctuation">-</span><span class="token punctuation">-</span>socks5 localhost<span class="token punctuation">:</span>9000 http<span class="token punctuation">:</span>//www.ansible.com
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">warn</span><span class="token punctuation">:</span> no
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="copyæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#copyæ¨¡å—" aria-hidden="true">#</a> copyæ¨¡å—</h3><ul><li><strong>ä»ä¸»æ§ç«¯å¤åˆ¶æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœº</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>   <span class="token key atrule">src</span> <span class="token punctuation">:</span> æºæ–‡ä»¶  æŒ‡å®šæ‹·è´æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„  (å¦‚æœæœ‰/ åˆ™æ‹·è´ç›®å½•å†…å®¹<span class="token punctuation">,</span>æ¯”æ‹·è´ç›®å½•æœ¬èº«)
   <span class="token key atrule">dest</span><span class="token punctuation">:</span> æŒ‡å®šç›®æ ‡è·¯å¾„
   <span class="token key atrule">mode</span><span class="token punctuation">:</span> è®¾ç½®æƒé™
   <span class="token key atrule">backup</span><span class="token punctuation">:</span> å¤‡ä»½æºæ–‡ä»¶
   <span class="token key atrule">content</span><span class="token punctuation">:</span> ä»£æ›¿src  æŒ‡å®šæœ¬æœºæ–‡ä»¶å†…å®¹<span class="token punctuation">,</span>ç”Ÿæˆç›®æ ‡ä¸»æœºæ–‡ä»¶
   
   <span class="token punctuation">&gt;</span> ansible websrvs <span class="token punctuation">-</span>m copy <span class="token punctuation">-</span>a &quot;src=/root/test1.sh dest=/tmp/test2.showner=wang mode=600 backup=yes&quot;

   å¦‚æœç›®æ ‡å­˜åœ¨ï¼Œé»˜è®¤è¦†ç›–ï¼Œæ­¤å¤„æŒ‡å®šå…ˆå¤‡ä»½
   <span class="token punctuation">&gt;</span> ansible websrvs <span class="token punctuation">-</span>m copy <span class="token punctuation">-</span>a &quot;content=&#39;test content\nxxx&#39; dest=/tmp/test.txt&quot;
   æŒ‡å®šå†…å®¹ï¼Œç›´æ¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Playbookç”¨æ³•</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Copy file with owner and permissions
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /srv/myfiles/foo.conf
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/foo.conf
    <span class="token key atrule">owner</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">group</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">&#39;0644&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Copy file with owner and permission<span class="token punctuation">,</span> using symbolic representation
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /srv/myfiles/foo.conf
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/foo.conf
    <span class="token key atrule">owner</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">group</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">mode</span><span class="token punctuation">:</span> u=rw<span class="token punctuation">,</span>g=r<span class="token punctuation">,</span>o=r
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Another symbolic mode example<span class="token punctuation">,</span> adding some permissions and removing others
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /srv/myfiles/foo.conf
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/foo.conf
    <span class="token key atrule">owner</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">group</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">mode</span><span class="token punctuation">:</span> u+rw<span class="token punctuation">,</span>g<span class="token punctuation">-</span>wx<span class="token punctuation">,</span>o<span class="token punctuation">-</span>rwx
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Copy a new &quot;ntp.conf file into place<span class="token punctuation">,</span> backing up the original if it differs from the copied version
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /mine/ntp.conf
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/ntp.conf
    <span class="token key atrule">owner</span><span class="token punctuation">:</span> root
    <span class="token key atrule">group</span><span class="token punctuation">:</span> root
    <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">&#39;0644&#39;</span>
    <span class="token key atrule">backup</span><span class="token punctuation">:</span> yes
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Copy a new &quot;sudoers&quot; file into place<span class="token punctuation">,</span> after passing validation with visudo
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /mine/sudoers
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/sudoers
    <span class="token key atrule">validate</span><span class="token punctuation">:</span> /usr/sbin/visudo <span class="token punctuation">-</span>csf %s
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Copy a &quot;sudoers&quot; file on the remote machine for editing
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /etc/sudoers
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/sudoers.edit
    <span class="token key atrule">remote_src</span><span class="token punctuation">:</span> yes
    <span class="token key atrule">validate</span><span class="token punctuation">:</span> /usr/sbin/visudo <span class="token punctuation">-</span>csf %s
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Copy using inline content
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">&#39;# This file was moved to /etc/other.conf&#39;</span>
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/mine.conf
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> If follow=yes<span class="token punctuation">,</span> /path/to/file will be overwritten by contents of foo.conf
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /etc/foo.conf
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /path/to/link  <span class="token comment"># link to /path/to/file</span>
    <span class="token key atrule">follow</span><span class="token punctuation">:</span> yes
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> If follow=no<span class="token punctuation">,</span> /path/to/link will become a file and be overwritten by contents of foo.conf
  <span class="token key atrule">copy</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /etc/foo.conf
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /path/to/link  <span class="token comment"># link to /path/to/file</span>
    <span class="token key atrule">follow</span><span class="token punctuation">:</span> no
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="yum-repositoryæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#yum-repositoryæ¨¡å—" aria-hidden="true">#</a> yum_repositoryæ¨¡å—</h3><ul><li><strong>é…ç½®repoçš„yumæºæ¨¡å—</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">nameå‚æ•°</span><span class="token punctuation">:</span>	 		å¿…é¡»å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¦æ“ä½œçš„å”¯ä¸€çš„ä»“åº“IDï¼Œä¹Ÿå°±æ˜¯â€.repoâ€é…ç½®æ–‡ä»¶ä¸­æ¯ä¸ªä»“åº“å¯¹åº”çš„â€ä¸­æ‹¬å·â€å†…çš„ä»“åº“ID
<span class="token key atrule">baseurlå‚æ•°</span><span class="token punctuation">:</span>		æ­¤å‚æ•°ç”¨äºè®¾ç½®yumä»“åº“çš„baseurl
<span class="token key atrule">descriptionå‚æ•°</span><span class="token punctuation">:</span>	æ­¤å‚æ•°ç”¨äºè®¾ç½®ä»“åº“çš„æ³¨é‡Šï¼Œä¹Ÿå°±æ˜¯â€.repoâ€é…ç½®æ–‡ä»¶ä¸­æ¯ä¸ªä»“åº“å¯¹åº”çš„â€nameå­—æ®µâ€å¯¹åº”çš„å†…å®¹ã€‚
<span class="token key atrule">fileå‚æ•°</span><span class="token punctuation">:</span>			æ­¤å‚æ•°ç”¨äºè®¾ç½®ä»“åº“çš„é…ç½®æ–‡ä»¶åç§°ï¼Œå³è®¾ç½®â€.repoâ€é…ç½®æ–‡ä»¶çš„æ–‡ä»¶åå‰ç¼€ï¼Œåœ¨ä¸ä½¿ç”¨æ­¤å‚æ•°çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤ä»¥nameå‚æ•°çš„ä»“åº“IDä½œä¸ºâ€.repoâ€é…ç½®æ–‡ä»¶çš„æ–‡ä»¶åå‰ç¼€ï¼ŒåŒä¸€ä¸ªâ€™.repoâ€™é…ç½®æ–‡ä»¶ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªyumæº
<span class="token key atrule">enabledå‚æ•°</span><span class="token punctuation">:</span>		æ­¤å‚æ•°ç”¨äºè®¾ç½®æ˜¯å¦æ¿€æ´»å¯¹åº”çš„yumæºï¼Œæ­¤å‚æ•°é»˜è®¤å€¼ä¸ºyesï¼Œè¡¨ç¤ºå¯ç”¨å¯¹åº”çš„yumæºï¼Œè®¾ç½®ä¸ºnoè¡¨ç¤ºä¸å¯ç”¨å¯¹åº”çš„yumæºã€‚
<span class="token key atrule">gpgcheckå‚æ•°</span><span class="token punctuation">:</span>		æ­¤å‚æ•°ç”¨äºè®¾ç½®æ˜¯å¦å¼€å¯rpmåŒ…éªŒè¯åŠŸèƒ½ï¼Œé»˜è®¤å€¼ä¸ºnoï¼Œè¡¨ç¤ºä¸å¯ç”¨åŒ…éªŒè¯ï¼Œè®¾ç½®ä¸ºyesè¡¨ç¤ºå¼€å¯åŒ…éªŒè¯åŠŸèƒ½ã€‚
<span class="token key atrule">gpgcakeyå‚æ•°</span><span class="token punctuation">:</span>		å½“gpgcheckå‚æ•°è®¾ç½®ä¸ºyesæ—¶ï¼Œéœ€è¦ä½¿ç”¨æ­¤å‚æ•°æŒ‡å®šéªŒè¯åŒ…æ‰€éœ€çš„å…¬é’¥
<span class="token key atrule">stateå‚æ•°</span><span class="token punctuation">:</span>			é»˜è®¤å€¼ä¸ºpresentï¼Œå½“å€¼è®¾ç½®ä¸ºabsentæ—¶ï¼Œè¡¨ç¤ºåˆ é™¤å¯¹åº”çš„yumæº
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum_repositoryæ¨¡å—çš„ç¤ºä¾‹å‘½ä»¤å¦‚ä¸‹ï¼š

<span class="token punctuation">[</span>root@server4 ~<span class="token punctuation">]</span><span class="token comment"># ansible testA -m yum_repository -a &#39;name=rhel7.3 description=&quot;ansible rhel7.3&quot; baseurl=http://172.25.1.250/westos gpgcheck=no enabled=yes&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="yumæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#yumæ¨¡å—" aria-hidden="true">#</a> yumæ¨¡å—</h3><ul><li><strong>yumæºå®‰è£…rpmåŒ…çš„ç®¡ç†æ¨¡å—</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  stateï¼šçŠ¶æ€ï¼ˆpresentå®‰è£…ï¼Œabsentå¸è½½ï¼Œlatestæœ€æ–°çš„ï¼‰  
  
  ansible websrvs <span class="token parameter variable">-m</span> yum <span class="token parameter variable">-a</span> <span class="token string">&#39;list=httpd&#39;</span>  æŸ¥çœ‹ç¨‹åºåˆ—è¡¨
  ansible websrvs <span class="token parameter variable">-m</span> yum <span class="token parameter variable">-a</span> <span class="token string">&#39;name=httpd state=present&#39;</span> å®‰è£…
  ansible websrvs <span class="token parameter variable">-m</span> yum <span class="token parameter variable">-a</span> <span class="token string">&#39;name=httpd state=absent&#39;</span>  åˆ é™¤
  
  å¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªç¨‹åºåŒ…
  <span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible test -m yum -a &#39;name=vsftpd,httpd,memcached&#39;</span>
  æ›´æ–°ç¼“å­˜
  <span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible test  -m yum -a &#39;name=dstat update_cache=yes&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Playbookç”¨æ³•</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install the latest version of Apache
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
    <span class="token key atrule">state</span><span class="token punctuation">:</span> latest
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ensure a list of packages installed
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;{{ packages }}&quot;</span>
  <span class="token key atrule">vars</span><span class="token punctuation">:</span>
    <span class="token key atrule">packages</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> httpd
    <span class="token punctuation">-</span> httpd<span class="token punctuation">-</span>tools
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> remove the Apache package
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
    <span class="token key atrule">state</span><span class="token punctuation">:</span> absent
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install the latest version of Apache from the testing repo
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
    <span class="token key atrule">enablerepo</span><span class="token punctuation">:</span> testing
    <span class="token key atrule">state</span><span class="token punctuation">:</span> present
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install one specific version of Apache
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd<span class="token punctuation">-</span>2.2.29<span class="token punctuation">-</span>1.4.amzn1
    <span class="token key atrule">state</span><span class="token punctuation">:</span> present
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> upgrade all packages
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
    <span class="token key atrule">state</span><span class="token punctuation">:</span> latest
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> upgrade all packages<span class="token punctuation">,</span> excluding kernel &amp; foo related packages
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
    <span class="token key atrule">state</span><span class="token punctuation">:</span> latest
    <span class="token key atrule">exclude</span><span class="token punctuation">:</span> kernel*<span class="token punctuation">,</span>foo*
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install the nginx rpm from a remote repo
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//nginx.org/packages/centos/6/noarch/RPMS/nginx<span class="token punctuation">-</span>release<span class="token punctuation">-</span>centos<span class="token punctuation">-</span>6<span class="token punctuation">-</span>0.el6.ngx.noarch.rpm
    <span class="token key atrule">state</span><span class="token punctuation">:</span> present
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install nginx rpm from a local file
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> /usr/local/src/nginx<span class="token punctuation">-</span>release<span class="token punctuation">-</span>centos<span class="token punctuation">-</span>6<span class="token punctuation">-</span>0.el6.ngx.noarch.rpm
    <span class="token key atrule">state</span><span class="token punctuation">:</span> present
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install the &#39;Development tools&#39; package group
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;@Development tools&quot;</span>
    <span class="token key atrule">state</span><span class="token punctuation">:</span> present
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install the &#39;Gnome desktop&#39; environment group
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;@^gnome-desktop-environment&quot;</span>
    <span class="token key atrule">state</span><span class="token punctuation">:</span> present
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> List ansible packages and register result to print with debug later.
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">list</span><span class="token punctuation">:</span> ansible
  <span class="token key atrule">register</span><span class="token punctuation">:</span> result
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install package with multiple repos enabled
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> sos
    <span class="token key atrule">enablerepo</span><span class="token punctuation">:</span> <span class="token string">&quot;epel,ol7_latest&quot;</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install package with multiple repos disabled
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> sos
    <span class="token key atrule">disablerepo</span><span class="token punctuation">:</span> <span class="token string">&quot;epel,ol7_latest&quot;</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install a list of packages
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nginx
      <span class="token punctuation">-</span> postgresql
      <span class="token punctuation">-</span> postgresql<span class="token punctuation">-</span>server
    <span class="token key atrule">state</span><span class="token punctuation">:</span> present
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Download the nginx package but do not install it
  <span class="token key atrule">yum</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nginx
    <span class="token key atrule">state</span><span class="token punctuation">:</span> latest
    <span class="token key atrule">download_only</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="serviceæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#serviceæ¨¡å—" aria-hidden="true">#</a> serviceæ¨¡å—</h3><ul><li><strong>æœåŠ¡çŠ¶æ€ç®¡ç†æ¨¡å—</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>    enabledï¼š<span class="token punctuation">[</span>yes/no<span class="token punctuation">]</span> å¯åŠ¨osåå¯åŠ¨å¯¹åº”serviceçš„é€‰é¡¹<span class="token punctuation">;</span>æ˜¯å¦å¼€æœºå¯åŠ¨
    name:éœ€è¦è¿›è¡Œæ“ä½œçš„serviceåå­—
    state:<span class="token punctuation">[</span>stared/stoped/restarted/reloaded<span class="token punctuation">]</span> æœåŠ¡æœ€ç»ˆæ“ä½œåçš„çŠ¶æ€
    
    <span class="token operator">&gt;</span>ansible srv <span class="token parameter variable">-m</span> <span class="token function">service</span> <span class="token parameter variable">-a</span> <span class="token string">&#39;name=httpd state=stopped&#39;</span>  åœæ­¢æœåŠ¡
  	<span class="token operator">&gt;</span>ansible srv <span class="token parameter variable">-m</span> <span class="token function">service</span> <span class="token parameter variable">-a</span> <span class="token string">&#39;name=httpd state=started enabled=yes&#39;</span> å¯åŠ¨æœåŠ¡,å¹¶è®¾ä¸ºå¼€æœºè‡ªå¯
  	<span class="token operator">&gt;</span>ansible srv <span class="token parameter variable">-m</span> <span class="token function">service</span> <span class="token parameter variable">-a</span> <span class="token string">&#39;name=httpd state=reloaded&#39;</span>  é‡æ–°åŠ è½½
  	<span class="token operator">&gt;</span>ansible srv <span class="token parameter variable">-m</span> <span class="token function">service</span> <span class="token parameter variable">-a</span> <span class="token string">&#39;name=httpd state=restarted&#39;</span> é‡å¯æœåŠ¡
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Playbookç”¨æ³•</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Start service httpd<span class="token punctuation">,</span> if not started
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
    <span class="token key atrule">state</span><span class="token punctuation">:</span> started
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Stop service httpd<span class="token punctuation">,</span> if started
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
    <span class="token key atrule">state</span><span class="token punctuation">:</span> stopped
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Restart service httpd<span class="token punctuation">,</span> in all cases
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
    <span class="token key atrule">state</span><span class="token punctuation">:</span> restarted
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Reload service httpd<span class="token punctuation">,</span> in all cases
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
    <span class="token key atrule">state</span><span class="token punctuation">:</span> reloaded
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Enable service httpd<span class="token punctuation">,</span> and not touch the state
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> yes
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Start service foo<span class="token punctuation">,</span> based on running process /usr/bin/foo
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">pattern</span><span class="token punctuation">:</span> /usr/bin/foo
    <span class="token key atrule">state</span><span class="token punctuation">:</span> started
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Restart network service for interface eth0
  <span class="token key atrule">service</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> network
    <span class="token key atrule">state</span><span class="token punctuation">:</span> restarted
    <span class="token key atrule">args</span><span class="token punctuation">:</span> eth0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="scriptæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#scriptæ¨¡å—" aria-hidden="true">#</a> scriptæ¨¡å—</h3><ul><li><strong>å¯ä»¥å®ç°è¢«æ§ç«¯ä¸Šå¯ä»¥æ‰§è¡Œansibleæ§åˆ¶ç«¯çš„è„šæœ¬</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> ç¤ºä¾‹ï¼šansible <span class="token builtin class-name">test</span> <span class="token parameter variable">-m</span> script <span class="token parameter variable">-a</span> <span class="token string">&#39;/4.40/www/2.sh&#39;</span>
 åœ¨testç»„æ‰€æœ‰è¢«æ§ç«¯æ‰§è¡Œansibleæ§åˆ¶ç«¯ä¸­/4.40./www/ç›®å½•ä¸‹çš„2.sh
 
   <span class="token operator">&gt;</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;/PATH/TO/SCRIPT_FILE&quot;</span>
   <span class="token operator">&gt;</span> ansible websrvs <span class="token parameter variable">-m</span> script <span class="token parameter variable">-a</span> /data/test.sh
 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Playbookç”¨æ³•</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run a script with arguments (free form)
  <span class="token key atrule">script</span><span class="token punctuation">:</span> /some/local/script.sh <span class="token punctuation">-</span><span class="token punctuation">-</span>some<span class="token punctuation">-</span>argument 1234
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run a script with arguments (using &#39;cmd&#39; parameter)
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token key atrule">cmd</span><span class="token punctuation">:</span> /some/local/script.sh <span class="token punctuation">-</span><span class="token punctuation">-</span>some<span class="token punctuation">-</span>argument 1234
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run a script only if file.txt does not exist on the remote node
  <span class="token key atrule">script</span><span class="token punctuation">:</span> /some/local/create_file.sh <span class="token punctuation">-</span><span class="token punctuation">-</span>some<span class="token punctuation">-</span>argument 1234
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">creates</span><span class="token punctuation">:</span> /the/created/file.txt
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run a script only if file.txt exists on the remote node
  <span class="token key atrule">script</span><span class="token punctuation">:</span> /some/local/remove_file.sh <span class="token punctuation">-</span><span class="token punctuation">-</span>some<span class="token punctuation">-</span>argument 1234
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">removes</span><span class="token punctuation">:</span> /the/removed/file.txt
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run a script using an executable in a non<span class="token punctuation">-</span>system path
  <span class="token key atrule">script</span><span class="token punctuation">:</span> /some/local/script
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">executable</span><span class="token punctuation">:</span> /some/remote/executable
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run a script using an executable in a system path
  <span class="token key atrule">script</span><span class="token punctuation">:</span> /some/local/script.py
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">executable</span><span class="token punctuation">:</span> python3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fetch-fileæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#fetch-fileæ¨¡å—" aria-hidden="true">#</a> fetch+fileæ¨¡å—</h3><ul><li><strong>Fetchï¼šä»è¿œç¨‹ä¸»æœºæå–æ–‡ä»¶è‡³ä¸»æ§ç«¯ï¼Œcopyç›¸åï¼Œç›®å‰ä¸æ”¯æŒç›®å½•,å¯ä»¥å…ˆæ‰“åŒ…,å†æå–æ–‡ä»¶</strong></li><li><strong>Fileï¼šè®¾ç½®æ–‡ä»¶å±æ€§</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Fetchï¼šä»è¿œç¨‹ä¸»æœºæå–æ–‡ä»¶è‡³ä¸»æ§ç«¯ï¼Œcopyç›¸åï¼Œç›®å‰ä¸æ”¯æŒç›®å½•,å¯ä»¥å…ˆæ‰“åŒ…,å†æå–æ–‡ä»¶</span>

    <span class="token operator">&gt;</span> ansible websrvs <span class="token parameter variable">-m</span> fetch <span class="token parameter variable">-a</span> <span class="token string">&#39;src=/root/test.sh dest=/data/scripts&#39;</span>
    ä¼šç”Ÿæˆæ¯ä¸ªè¢«ç®¡ç†ä¸»æœºä¸åŒç¼–å·çš„ç›®å½•,ä¸ä¼šå‘ç”Ÿæ–‡ä»¶åå†²çª
    <span class="token operator">&gt;</span> ansible all <span class="token parameter variable">-m</span> shell <span class="token parameter variable">-a</span> <span class="token string">&#39;tar jxvf test.tar.gz /root/test.sh&#39;</span>
    <span class="token operator">&gt;</span> ansible all <span class="token parameter variable">-m</span> fetch <span class="token parameter variable">-a</span> <span class="token string">&#39;src=/root/test.tar.gz dest=/data/&#39;</span>

 

<span class="token comment"># Fileï¼šè®¾ç½®æ–‡ä»¶å±æ€§</span>

   path: è¦ç®¡ç†çš„æ–‡ä»¶è·¯å¾„ <span class="token punctuation">(</span>å¼ºåˆ¶æ·»åŠ <span class="token punctuation">)</span>
   recurse: é€’å½’,æ–‡ä»¶å¤¹è¦ç”¨é€’å½’
   src:  åˆ›å»ºç¡¬é“¾æ¥,è½¯é“¾æ¥æ—¶,æŒ‡å®šæºç›®æ ‡,é…åˆ<span class="token string">&#39;state=link&#39;</span> <span class="token string">&#39;state=hard&#39;</span> è®¾ç½®è½¯é“¾æ¥,ç¡¬é“¾æ¥
   state: çŠ¶æ€
   absent ç¼ºå¸­,åˆ é™¤

         

   <span class="token operator">&gt;</span> ansible websrvs <span class="token parameter variable">-m</span> <span class="token function">file</span> <span class="token parameter variable">-a</span> <span class="token string">&#39;path=/app/test.txt state=touch&#39;</span>       åˆ›å»ºæ–‡ä»¶
   <span class="token operator">&gt;</span> ansible websrvs <span class="token parameter variable">-m</span> <span class="token function">file</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;path=/data/testdir state=directory&quot;</span>   åˆ›å»ºç›®å½•    
   <span class="token operator">&gt;</span> ansible websrvs <span class="token parameter variable">-m</span> <span class="token function">file</span> <span class="token parameter variable">-a</span> <span class="token string">&quot;path=/root/test.sh owner=wang mode=755&quot;</span>  è®¾ç½®æƒé™755
   <span class="token operator">&gt;</span> ansible websrvs <span class="token parameter variable">-m</span> <span class="token function">file</span> <span class="token parameter variable">-a</span> <span class="token string">&#39;src=/data/testfile dest=/data/testfile-link state=link&#39;</span> åˆ›å»ºè½¯é“¾æ¥
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>playbookç”¨æ³•</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Change file ownership<span class="token punctuation">,</span> group and permissions
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /etc/foo.conf
    <span class="token key atrule">owner</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">group</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">&#39;0644&#39;</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Give insecure permissions to an existing file
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /work
    <span class="token key atrule">owner</span><span class="token punctuation">:</span> root
    <span class="token key atrule">group</span><span class="token punctuation">:</span> root
    <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">&#39;1777&#39;</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create a symbolic link
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /file/to/link/to
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /path/to/symlink
    <span class="token key atrule">owner</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">group</span><span class="token punctuation">:</span> foo
    <span class="token key atrule">state</span><span class="token punctuation">:</span> link

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create two hard links
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> <span class="token string">&#39;/tmp/{{ item.src }}&#39;</span>
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> <span class="token string">&#39;{{ item.dest }}&#39;</span>
    <span class="token key atrule">state</span><span class="token punctuation">:</span> hard
  <span class="token key atrule">loop</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">src</span><span class="token punctuation">:</span> x<span class="token punctuation">,</span> <span class="token key atrule">dest</span><span class="token punctuation">:</span> y <span class="token punctuation">}</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">src</span><span class="token punctuation">:</span> z<span class="token punctuation">,</span> <span class="token key atrule">dest</span><span class="token punctuation">:</span> k <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cronæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#cronæ¨¡å—" aria-hidden="true">#</a> cronæ¨¡å—</h3><ul><li><strong>å®šæ—¶ä»»åŠ¡çš„åˆ›å»ºå’Œåˆ é™¤ç®¡ç†</strong></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>åˆ›å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡

<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible test -m cron -a &#39;minute=* weekday=1,3,5  job=&quot;/usr/bin/wall FBI waring&quot; name=warningcron&#39;  </span>

ç¦ç”¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡

<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible test -m cron -a &#39;disabled=true  job=&quot;/usr/bin/wall FBI waring&quot; name=warningcron&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="unarchiveæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#unarchiveæ¨¡å—" aria-hidden="true">#</a> unarchiveæ¨¡å—</h3><ul><li><strong>è§£å‹ç¼©çš„ç®¡ç†æ¨¡å—ï¼Œå¯ä»¥å°†æœ¬åœ°ansibleæ§åˆ¶èŠ‚ç‚¹çš„åŒ…è§£å‹è‡³nodeèŠ‚ç‚¹</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">creates</span><span class="token punctuation">:</span> 		ä¸€ä¸ªæ–‡ä»¶åï¼Œå½“å®ƒå·²ç»å­˜åœ¨æ—¶ï¼Œè¿™ä¸ªæ­¥éª¤å°†ä¸ä¼šè¢«è¿è¡Œã€‚
<span class="token key atrule">copy</span><span class="token punctuation">:</span>  			é»˜è®¤ä¸ºyesï¼Œæ‹·è´çš„æ–‡ä»¶ä»ansibleä¸»æœºå¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºï¼Œnoåœ¨è¿œç¨‹ä¸»æœºä¸Šå¯»æ‰¾srcæºæ–‡ä»¶è§£å‹
<span class="token key atrule">src</span><span class="token punctuation">:</span> 			taræºè·¯å¾„ï¼Œå¯ä»¥æ˜¯ansibleä¸»æœºä¸Šçš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œå¦‚æœæ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œåˆ™éœ€è®¾ç½®copy=no
<span class="token key atrule">dest</span><span class="token punctuation">:</span> 			è¿œç¨‹ä¸»æœºä¸Šçš„ç›®æ ‡ç»å¯¹è·¯å¾„
<span class="token key atrule">mode</span><span class="token punctuation">:</span> 			è®¾ç½®è§£å‹ç¼©åçš„æ–‡ä»¶æƒé™
<span class="token key atrule">exec</span><span class="token punctuation">:</span> 			åˆ—å‡ºéœ€è¦æ’é™¤çš„ç›®å½•å’Œæ–‡ä»¶
<span class="token key atrule">remote_src</span><span class="token punctuation">:</span> 	è®¾ç½®remote_src=yesä¸ºè§£åŒ…ç›®æ ‡ä¸Šå·²ç»å­˜åœ¨çš„æ¡£æ¡ˆã€‚å¯¹äºWindowsç›®æ ‡ï¼Œæ”¹ç”¨win_unzipæ¨¡å—ã€‚
<span class="token key atrule">owner</span><span class="token punctuation">:</span>  		è§£å‹åæ–‡ä»¶æˆ–ç›®å½•çš„å±ä¸»
<span class="token key atrule">group</span><span class="token punctuation">:</span>		 	è§£å‹åçš„ç›®å½•æˆ–æ–‡ä»¶çš„å±ç»„
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>åœ¨è¿œç¨‹ä¸»æœºä¸Šè§£å‹æ–‡ä»¶å¹¶è®¾ç½®æƒé™
<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible all -m unarchive -a &#39;src=/srv/tomcat8/apache-tomcat-8.0.29.tar.gz dest=/usr/local copy=no mode=0755&#39;</span>

è§£å‹ansibleç®¡ç†æœºä¸Šçš„å‹ç¼©æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœºå¹¶è®¾ç½®æƒé™
<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible all -m unarchive -a &quot;src=/tmp/install/zabbix-3.0.4.tar.gz dest=/tmp/ mode=0755 copy=yes&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Playbookç”¨æ³•</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Extract foo.tgz into /var/lib/foo
  <span class="token key atrule">unarchive</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> foo.tgz
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /var/lib/foo

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Unarchive a file that is already on the remote machine
  <span class="token key atrule">unarchive</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /tmp/foo.zip
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /usr/local/bin
    <span class="token key atrule">remote_src</span><span class="token punctuation">:</span> yes

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Unarchive a file that needs to be downloaded (added in 2.0)
  <span class="token key atrule">unarchive</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.com/example.zip
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /usr/local/bin
    <span class="token key atrule">remote_src</span><span class="token punctuation">:</span> yes

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Unarchive a file with extra options
  <span class="token key atrule">unarchive</span><span class="token punctuation">:</span>
    <span class="token key atrule">src</span><span class="token punctuation">:</span> /tmp/foo.zip
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /usr/local/bin
    <span class="token key atrule">extra_opts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>transform
    <span class="token punctuation">-</span> s/^xxx/yyy/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="åˆ©ç”¨æ¨¡å—å¿«é€Ÿéƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#åˆ©ç”¨æ¨¡å—å¿«é€Ÿéƒ¨ç½²" aria-hidden="true">#</a> åˆ©ç”¨æ¨¡å—å¿«é€Ÿéƒ¨ç½²</h3><p><code>é…ç½®å¥½hosts</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible --list-hosts server</span>
  hosts <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>:
    <span class="token number">192.168</span>.1.107
    <span class="token number">192.168</span>.1.108
    <span class="token number">192.168</span>.1.110

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ä½¿ç”¨æ¨¡å—æ“ä½œå­æœº</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#ä½¿ç”¨COPYæ¨¡å—ä¼ é€CentOS-Base.repoçš„yumæº</span>

<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible server -m copy -a &quot;src=/root/CentOS-Base.repo dest=/etc/yum.repos.d/CentOS-Base.repo mode=600 backup=yes&quot;</span>
<span class="token number">192.168</span>.1.110 <span class="token operator">|</span> CHANGED <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;ansible_facts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;discovered_interpreter_python&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/usr/libexec/platform-python&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;changed&quot;</span><span class="token builtin class-name">:</span> true,
    <span class="token string">&quot;checksum&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;4966466ad015ef3d2a3cc0b8252d43efbdcf2c94&quot;</span>,
    <span class="token string">&quot;dest&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/etc/yum.repos.d/CentOS-Base.repo&quot;</span>,
    <span class="token string">&quot;gid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;group&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;root&quot;</span>,
    <span class="token string">&quot;md5sum&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;d06fb7d5709727828bcaba7457ea673e&quot;</span>,
    <span class="token string">&quot;mode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0600&quot;</span>,
    <span class="token string">&quot;owner&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;root&quot;</span>,
    <span class="token string">&quot;secontext&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;system_u:object_r:system_conf_t:s0&quot;</span>,
    <span class="token string">&quot;size&quot;</span><span class="token builtin class-name">:</span> <span class="token number">2595</span>,
    <span class="token string">&quot;src&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/root/.ansible/tmp/ansible-tmp-1632059937.218095-11326-239583984569451/source&quot;</span>,
    <span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;file&quot;</span>,
    <span class="token string">&quot;uid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>

<span class="token comment">#ä½¿ç”¨shellæ¨¡å—æ£€æµ‹yumæºæ˜¯å¦æ­£å¸¸ä½¿ç”¨</span>

<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible server -m shell -a &quot;yum repolist all&quot; </span>
<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>: Consider using the yum module rather than running <span class="token string">&#39;yum&#39;</span><span class="token builtin class-name">.</span>  If you need to use <span class="token builtin class-name">command</span> because yum is insufficient you can <span class="token function">add</span> <span class="token string">&#39;warn:
false&#39;</span> to this <span class="token builtin class-name">command</span> task or <span class="token builtin class-name">set</span> <span class="token string">&#39;command_warnings=False&#39;</span> <span class="token keyword">in</span> ansible.cfg to get rid of this message.
<span class="token number">192.168</span>.1.110 <span class="token operator">|</span> CHANGED <span class="token operator">|</span> <span class="token assign-left variable">rc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;&gt;</span>
Updating Subscription Management repositories.
Unable to <span class="token builtin class-name">read</span> consumer identity
This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.
repo <span class="token function">id</span>             repo name                                           status
AppStream           CentOS-8 - AppStream - mirrors.aliyun.com           enabled
PowerTools          CentOS-8 - PowerTools - mirrors.aliyun.com          disabled
base                CentOS-8 - Base - mirrors.aliyun.com                enabled
centosplus          CentOS-8 - Plus - mirrors.aliyun.com                disabled
extras              CentOS-8 - Extras - mirrors.aliyun.com              enabled
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>

<span class="token comment">#ä½¿ç”¨yumæ¨¡å—å®‰è£…httpdæœåŠ¡</span>

<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible -m yum -a &quot;name=httpd state=present&quot; server</span>
<span class="token number">192.168</span>.1.108 <span class="token operator">|</span> CHANGED <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;ansible_facts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;discovered_interpreter_python&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/usr/libexec/platform-python&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;changed&quot;</span><span class="token builtin class-name">:</span> true,
    <span class="token string">&quot;msg&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
    <span class="token string">&quot;rc&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;results&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;Installed: mailcap-2.1.48-3.el8.noarch&quot;</span>,
        <span class="token string">&quot;Installed: httpd-2.4.37-39.module_el8.4.0+778+c970deab.x86_64&quot;</span>,
        <span class="token string">&quot;Installed: httpd-filesystem-2.4.37-39.module_el8.4.0+778+c970deab.noarch&quot;</span>,
        <span class="token string">&quot;Installed: httpd-tools-2.4.37-39.module_el8.4.0+778+c970deab.x86_64&quot;</span>,
        <span class="token string">&quot;Installed: mod_http2-1.15.7-3.module_el8.4.0+778+c970deab.x86_64&quot;</span>,
        <span class="token string">&quot;Installed: centos-logos-httpd-85.8-1.el8.noarch&quot;</span>,
        <span class="token string">&quot;Installed: apr-1.6.3-11.el8.x86_64&quot;</span>,
        <span class="token string">&quot;Installed: apr-util-1.6.1-6.el8.x86_64&quot;</span>,
        <span class="token string">&quot;Installed: apr-util-bdb-1.6.1-6.el8.x86_64&quot;</span>,
        <span class="token string">&quot;Installed: apr-util-openssl-1.6.1-6.el8.x86_64&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>

<span class="token comment">#ä½¿ç”¨shellæ¨¡å—è¿œç¨‹å¼€å¯ï¼Œè¿œç¨‹æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>

<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible server -m shell -a &quot;systemctl start httpd&quot; </span>
<span class="token number">192.168</span>.1.107 <span class="token operator">|</span> CHANGED <span class="token operator">|</span> <span class="token assign-left variable">rc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;&gt;</span>

<span class="token number">192.168</span>.1.108 <span class="token operator">|</span> CHANGED <span class="token operator">|</span> <span class="token assign-left variable">rc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;&gt;</span>

<span class="token number">192.168</span>.1.110 <span class="token operator">|</span> CHANGED <span class="token operator">|</span> <span class="token assign-left variable">rc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;&gt;</span>

<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible server -m shell -a &quot;curl http://local:80&quot; </span>
^Z
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+  Stopped                 ansible server <span class="token parameter variable">-m</span> shell <span class="token parameter variable">-a</span> <span class="token string">&quot;curl http://local:80&quot;</span>
<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible server -m shell -a &quot;systemctl status httpd&quot; </span>
<span class="token number">192.168</span>.1.110 <span class="token operator">|</span> CHANGED <span class="token operator">|</span> <span class="token assign-left variable">rc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;&gt;</span>
â— httpd.service - The Apache HTTP Server
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/httpd.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Sun <span class="token number">2021</span>-09-19 <span class="token number">22</span>:08:57 CST<span class="token punctuation">;</span> 1min 24s ago
     Docs: man:httpd.service<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
 Main PID: <span class="token number">11512</span> <span class="token punctuation">(</span>httpd<span class="token punctuation">)</span>
   Status: <span class="token string">&quot;Running, listening on: port 80&quot;</span>
    Tasks: <span class="token number">213</span> <span class="token punctuation">(</span>limit: <span class="token number">11468</span><span class="token punctuation">)</span>
   Memory: <span class="token number">27</span>.4M
   CGroup: /system.slice/httpd.service
           â”œâ”€11512 /usr/sbin/httpd <span class="token parameter variable">-DFOREGROUND</span>
           â”œâ”€11612 /usr/sbin/httpd <span class="token parameter variable">-DFOREGROUND</span>
           â”œâ”€11613 /usr/sbin/httpd <span class="token parameter variable">-DFOREGROUND</span>
           â”œâ”€11614 /usr/sbin/httpd <span class="token parameter variable">-DFOREGROUND</span>
           â””â”€11615 /usr/sbin/httpd <span class="token parameter variable">-DFOREGROUND</span>

Sep <span class="token number">19</span> <span class="token number">22</span>:08:17 server3 systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Starting The Apache HTTP Server<span class="token punctuation">..</span>.
Sep <span class="token number">19</span> <span class="token number">22</span>:08:57 server3 httpd<span class="token punctuation">[</span><span class="token number">11512</span><span class="token punctuation">]</span>: AH00558: httpd: Could not reliably determine the server<span class="token string">&#39;s fully qualified domain name, using fe80::4a92:a42e:da79:b4e6. Set the &#39;</span>ServerName&#39; directive globally to suppress this message
Sep <span class="token number">19</span> <span class="token number">22</span>:08:57 server3 systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started The Apache HTTP Server.
Sep <span class="token number">19</span> <span class="token number">22</span>:09:37 server3 httpd<span class="token punctuation">[</span><span class="token number">11512</span><span class="token punctuation">]</span>: Server configured, listening on: port <span class="token number">80</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨playbookçš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨playbookçš„æ–¹å¼" aria-hidden="true">#</a> <strong>ä½¿ç”¨playbookçš„æ–¹å¼</strong></h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># vim playbook.yaml  </span>
<span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install httpd
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> server
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install httpd
    <span class="token key atrule">yum</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
      <span class="token key atrule">state</span><span class="token punctuation">:</span> present
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> service start
    <span class="token key atrule">service</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd
      <span class="token key atrule">state</span><span class="token punctuation">:</span> started
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨ansible-playbookéƒ¨ç½²</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook  playbook.yaml </span>

PLAY <span class="token punctuation">[</span>install httpd<span class="token punctuation">]</span> ***********************************************************************************************

TASK <span class="token punctuation">[</span>Gathering Facts<span class="token punctuation">]</span> *********************************************************************************************
ok: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.107<span class="token punctuation">]</span>
ok: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.108<span class="token punctuation">]</span>
ok: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.110<span class="token punctuation">]</span>

TASK <span class="token punctuation">[</span>install httpd<span class="token punctuation">]</span> ***********************************************************************************************
ok: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.110<span class="token punctuation">]</span>
ok: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.107<span class="token punctuation">]</span>
ok: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.108<span class="token punctuation">]</span>

TASK <span class="token punctuation">[</span>service start<span class="token punctuation">]</span> ***********************************************************************************************
changed: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.108<span class="token punctuation">]</span>
changed: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.107<span class="token punctuation">]</span>
changed: <span class="token punctuation">[</span><span class="token number">192.168</span>.1.110<span class="token punctuation">]</span>

PLAY RECAP *********************************************************************************************************
<span class="token number">192.168</span>.1.107              <span class="token builtin class-name">:</span> <span class="token assign-left variable">ok</span><span class="token operator">=</span><span class="token number">3</span>    <span class="token assign-left variable">changed</span><span class="token operator">=</span><span class="token number">1</span>    <span class="token assign-left variable">unreachable</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">failed</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">skipped</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">rescued</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">ignored</span><span class="token operator">=</span><span class="token number">0</span>  
<span class="token number">192.168</span>.1.108              <span class="token builtin class-name">:</span> <span class="token assign-left variable">ok</span><span class="token operator">=</span><span class="token number">3</span>    <span class="token assign-left variable">changed</span><span class="token operator">=</span><span class="token number">1</span>    <span class="token assign-left variable">unreachable</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">failed</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">skipped</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">rescued</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">ignored</span><span class="token operator">=</span><span class="token number">0</span>  
<span class="token number">192.168</span>.1.110              <span class="token builtin class-name">:</span> <span class="token assign-left variable">ok</span><span class="token operator">=</span><span class="token number">3</span>    <span class="token assign-left variable">changed</span><span class="token operator">=</span><span class="token number">1</span>    <span class="token assign-left variable">unreachable</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">failed</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">skipped</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">rescued</span><span class="token operator">=</span><span class="token number">0</span>    <span class="token assign-left variable">ignored</span><span class="token operator">=</span><span class="token number">0</span>  

<span class="token punctuation">[</span>root@ansible ~<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/demo/theme-docs/src/zh/isKcount/3/ansible/file/2.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: admin@example.com">Administrator</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/zh/isKcount/3/ansible/file/1.html" class="nav-link prev" aria-label="AnsibleåŸºç¡€"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->AnsibleåŸºç¡€</div></a><a href="/zh/isKcount/3/ansible/file/3.html" class="nav-link next" aria-label="Ansibleçš„Playbook"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">Ansibleçš„Playbook<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2022 isKcount</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.85823306.js" defer></script>
  </body>
</html>
